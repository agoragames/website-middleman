<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width" name="viewport"><title>Brain Matters</title><link href="../../assets/images/favicon.ico" rel="shortcut icon"><link href="../../assets/stylesheets/all-dc5d1bf2.css" media="all" rel="stylesheet" type="text/css" /><!--[if lt IE 9]><script src="../../assets/javascripts/vendor/html5shiv-8b3747c5.js" type="text/javascript"></script><![endif]--></head><body><div class="outer-wrap"><div class="inner-wrap"><div class="wrap"><header class="clearfix" id="page"><a href="/"><img alt="Agora Games" id="logo" src="../../assets/images/agora-games-logo-e99b2824.png"></a><nav><ul><li><a href="https://hydra.agoragames.com/">Products</a></li><li><a href="/portfolio.html">Customers</a></li><li><a href="/us.html">Team</a></li><li><a href="/community.html">Community</a></li><li><a href="/work-at-agora.html">Jobs</a></li><li><a href="/blog/">Blog</a></li></ul></nav></header></div><div class="wrap"><article class="clearfix"><header><h1>February 2010</h1></header><section id="blog-entries"><div class="blog-entry"><div class="date-comments"><div class="date">Feb 23</div></div><div class="blog-content"><h2><a href="/blog/2010-02-23-watching-trees.html">Watching Trees</a></h2><div class="blog-author">By <strong>Jason LaPorte</strong></div><div class="blog-body"><p>As a SysAdmin, my job more-or-less exists by knowing miscellaneous arcana that most software engineers aren't aware of.</p>

<p>When a particular co-worker here at Agora has a problem with his Linux machine, I provide advice and show him how to fix it. Some months after he had joined Agora, I discovered that after each troubleshooting session, he copy-and-pastes the entire text terminal log into a text file that he keeps on his desktop. He has dozens of transcripts at this point; I bet if I were to look through it, it would read something like the Tao te Ching or Bhagavad Gita, only concerning UNIX instead of right living.</p>

<p>(Of course, there's not much of a difference between UNIX and right living, but that's a topic for another day.)</p>

<p>In the spirit of allowing you to build your own little collection, here is a simple trick that came in handy to me yesterday.</p>

<p>Last night, the cron jobs powering one of our managed sites stopped running. I had stopped them, cleaned up, and restarted them, but I wanted to watch the system and see if they had started running again so I could monitor that they were doing their job.</p>

<p>UNIX has a well-known command called " <a href="http://linux.die.net/man/1/top">top</a>," which shows superlative processes running on your system: which ones are consuming the most CPU time, which ones are consuming the most RAM, which ones have been running the longest, and so on. It's a very useful tool, but if you're trying to track down processes over time that don't necessarily consume very many resources, then it's not the tool you're looking for.</p>

<p>However, our Linux distribution (and, indeed, most others) provide a useful graphical tool for mapping the current state of the system: " <a href="http://linux.die.net/man/1/pstree">pstree</a>." This command will give you a list of processes (much like the " <a href="http://linux.die.net/man/1/ps">ps</a>" command), except that instead of generating a list, it will draw a little tree showing the state of the system. This is perfect for seeing exactly what is going on: which daemons are running, who is on the system and what they're executing, and so on. However, it doesn't show you what is happening over time; it merely lists what is happening at this moment.</p>

<p>However, our Linux distribution (and, indeed, most others) provides yet another useful tool: " <a href="http://linux.die.net/man/1/watch">watch</a>." It runs a program every 2 seconds (by default) and displays the result to your screen. This allows you to make a ghetto clock by writing something like "watch <a href="http://linux.die.net/man/1/date">date</a>;" in our case, we could make a ghetto graphical "top" by writing the simple "watch pstree." You can now watch your virtual trees rustle in the wind.</p>

<p>It kept us on top of the cron job, and things were back to normal in no time.</p>

<p>For more information, RTFM. :)</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Feb 23</div></div><div class="blog-content"><h2><a href="/blog/2010-02-23-experimenting-with-redis.html">Experimenting with Redis</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>Yesterday I started looking at ways to do inter-application communication. In a number of projects we've done here at Agora Games, we've used queues to make that happen. <a href="http://code.google.com/p/redis/">Redis</a> has been on my radar for awhile now, but yesterday I drove my Chevy to the levee and guess what? The levee is NOT dry people. I mean, who drinks rye anyway these days? Old people.</p>

<p>Right, <a href="http://code.google.com/p/redis/">Redis</a>.</p>

<p>"Redis is an advanced key-value store. It is similar to memcached but the dataset is not volatile, and values can be strings, exactly like in memcached, but also lists, sets, and ordered sets. All this data types can be manipulated with atomic operations to push/pop elements, add/remove elements, perform server side union, intersection, difference between sets, and so forth. Redis supports different kind of sorting abilities."</p>

<p>I was particularly interested in the support in Redis for lists, which would allow me to have one application push stuff into the datastore and allow for another application to pull stuff from the datastore. A datastore that could operate as a queue? I guess this is as close as we're going to get to flying cars in 2010. Redis is also supposed to be wicked fast and there are a number of libraries available in your programming language of choice with which to communicate with Redis.</p>

<p>Redis setup was trivial and "just worked".</p>

<p>After starting the Redis server, I could just prototype in script/console.</p>

<p>Here we go:</p>

<p><code>ruby
&gt;&gt; redis_queue = Redis.new
=&gt; #&lt;Redis:0x222df9c @thread_safe=nil, @logger=nil, @password=nil, @timeout=5, @db=0, @sock=nil, @host="127.0.0.1", @port=6379&gt;
&gt;&gt; redis_queue.push_tail 'strings', 'string 1'
=&gt; "OK"
&gt;&gt; redis_queue.push_tail 'strings', 'string 2'
&gt;&gt; "OK"
&gt;&gt; redis_queue.list_length('strings')
=&gt; 2
&gt;&gt; redis_queue.list_range('strings', 0, -1)
=&gt; ["string 1", "string 2"]
&gt;&gt; some_string = redis_queue.pop_head('strings')
=&gt; "string 1"
&gt;&gt; r.list_range('strings', 0, -1)
=&gt; ["string 2"]
&gt;&gt; r.list_length('strings')
=&gt; 1
&gt;&gt; quit
</code></p>

<p><a href="http://code.google.com/p/redis/wiki/CommandReference">There are quite a few commands that make Redis even more awesome, but for now I'm sold</a>. (If using an entire sentence as a link is wrong then I don't want to be right)</p>

<p>Also, I know of <a href="http://github.com/defunkt/resque#readme">Resque</a>, "a Redis-backed library for creating background jobs, placing those jobs on multiple queues, and processing them later." If I ever feel like driving the Mercedes Benz of flying cars, I'll use it.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Feb 22</div></div><div class="blog-content"><h2><a href="/blog/2010-02-22-and-now-for-some-couchdb.html">And now for some couchdb</a></h2><div class="blog-author">By <strong>Jason LaPorte</strong></div><div class="blog-body"><p>I had occasion tonight to give a quick demo of CouchDB.  This is so simple its almost not worth blogging about, but hey, good software is <strong><em>supposed</em></strong> to be simple.</p>

<p><strong>Install</strong>
 On your Mac:</p>

<p><code>
 sudo port install couchdb
 sudo launchctl load -w /Library/LaunchDaemons/org.apache.couchdb.plist
</code></p>

<p>On Ubuntu:</p>

<p><code>
 sudo apt-get install couchdb
</code></p>

<p>You're done; now to play.</p>

<p><strong>Futon Admin Interface</strong>
 This allows you to create a DB, create records, etc.</p>

<ol>
  <li>Open http://localhost:5984/_utils/</li>
  <li>…</li>
  <li>Prosper</li>
</ol>

<p><strong>Using our old friend <em>curl</em></strong></p>

<p><code>
 curl -X PUT http://localhost:5984/mlg/ #create a db
 curl -X GET http://localhost:5984/mlg/ #get a whole bunch of info about the db
 curl -X POST http://localhost:5984/mlg/ -H "Content-Type:application/json" -d '{"body": "Here is a paragraph"}' #create a record
</code></p>
</div></div></div></section><aside id="sidebar"><div class="block" id="block-archive"><h2>Blog archives</h2><h3>2013</h3><ul><li><a href="/blog/2013/11.html">November 2013</a></li><li><a href="/blog/2013/10.html">October 2013</a></li><li><a href="/blog/2013/09.html">September 2013</a></li><li><a href="/blog/2013/08.html">August 2013</a></li><li><a href="/blog/2013/07.html">July 2013</a></li><li><a href="/blog/2013/06.html">June 2013</a></li><li><a href="/blog/2013/05.html">May 2013</a></li><li><a href="/blog/2013/04.html">April 2013</a></li><li><a href="/blog/2013/03.html">March 2013</a></li><li><a href="/blog/2013/02.html">February 2013</a></li><li><a href="/blog/2013/01.html">January 2013</a></li></ul><h3>2012</h3><ul><li><a href="/blog/2012/12.html">December 2012</a></li><li><a href="/blog/2012/11.html">November 2012</a></li><li><a href="/blog/2012/10.html">October 2012</a></li><li><a href="/blog/2012/09.html">September 2012</a></li><li><a href="/blog/2012/08.html">August 2012</a></li><li><a href="/blog/2012/07.html">July 2012</a></li><li><a href="/blog/2012/06.html">June 2012</a></li><li><a href="/blog/2012/05.html">May 2012</a></li><li><a href="/blog/2012/04.html">April 2012</a></li><li><a href="/blog/2012/03.html">March 2012</a></li><li><a href="/blog/2012/02.html">February 2012</a></li><li><a href="/blog/2012/01.html">January 2012</a></li></ul><h3>2011</h3><ul><li><a href="/blog/2011/10.html">October 2011</a></li><li><a href="/blog/2011/09.html">September 2011</a></li><li><a href="/blog/2011/08.html">August 2011</a></li><li><a href="/blog/2011/07.html">July 2011</a></li><li><a href="/blog/2011/06.html">June 2011</a></li><li><a href="/blog/2011/05.html">May 2011</a></li><li><a href="/blog/2011/04.html">April 2011</a></li><li><a href="/blog/2011/03.html">March 2011</a></li><li><a href="/blog/2011/02.html">February 2011</a></li><li><a href="/blog/2011/01.html">January 2011</a></li></ul><h3>2010</h3><ul><li><a href="/blog/2010/12.html">December 2010</a></li><li><a href="/blog/2010/11.html">November 2010</a></li><li><a href="/blog/2010/10.html">October 2010</a></li><li><a href="/blog/2010/09.html">September 2010</a></li><li><a href="/blog/2010/08.html">August 2010</a></li><li><a href="/blog/2010/07.html">July 2010</a></li><li><a href="/blog/2010/06.html">June 2010</a></li><li><a href="/blog/2010/05.html">May 2010</a></li><li><a href="/blog/2010/04.html">April 2010</a></li><li><a href="/blog/2010/03.html">March 2010</a></li><li><a href="/blog/2010/02.html">February 2010</a></li><li><a href="/blog/2010/01.html">January 2010</a></li></ul><h3>2009</h3><ul><li><a href="/blog/2009/12.html">December 2009</a></li><li><a href="/blog/2009/11.html">November 2009</a></li><li><a href="/blog/2009/10.html">October 2009</a></li><li><a href="/blog/2009/09.html">September 2009</a></li><li><a href="/blog/2009/08.html">August 2009</a></li><li><a href="/blog/2009/07.html">July 2009</a></li><li><a href="/blog/2009/06.html">June 2009</a></li><li><a href="/blog/2009/05.html">May 2009</a></li><li><a href="/blog/2009/04.html">April 2009</a></li><li><a href="/blog/2009/03.html">March 2009</a></li><li><a href="/blog/2009/02.html">February 2009</a></li><li><a href="/blog/2009/01.html">January 2009</a></li></ul><h3>2008</h3><ul><li><a href="/blog/2008/11.html">November 2008</a></li><li><a href="/blog/2008/10.html">October 2008</a></li><li><a href="/blog/2008/09.html">September 2008</a></li><li><a href="/blog/2008/08.html">August 2008</a></li></ul></div></aside></article></div></div></div><footer><div class="outer-wrap"><div class="wrap"><div id="copyright"><img alt="Agora Games" src="../../assets/images/agora-logo-agga-7c1d9a1f.png"> <a href="http://majorleaguegaming.com" target="_blank"><img alt="Major League Gaming" src="../../assets/images/mlg-logo-28545055.png"></a><a href="mailto:info@agoragames.com" id="email-us">Email Us</a><p>359 Broadway, Third Floor, Troy, NY 12180</p><p class="dim">&copy; 2013 Agora Games. All Rights Reserved.</p></div></div></div></footer><div class="hide"><iframe id="wufoo-iframe" src="javascript:void(0)"></iframe><a id="wufoo-thanks" href="/thanks.html"></a></div><!--[if lt IE 9]>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<!--<![endif]-->
<script>
  if (!window.jQuery) {
    document.write('<script type="text/javascript" src="../../assets/javascripts/vendor/jquery.min-199fc76d.js"><' + '/script>');
  }
</script>
<script src="../../assets/javascripts/all-426906ea.js" type="text/javascript"></script></body></html>