<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width" name="viewport"><title>Brain Matters</title><link href="/assets/images/favicon.ico" rel="shortcut icon"><link href="/assets/stylesheets/all-c9b4f9e9.css" media="all" rel="stylesheet" type="text/css" /><!--[if lt IE 9]><script src="/assets/javascripts/vendor/html5shiv-8b3747c5.js" type="text/javascript"></script><![endif]--></head><body><div class="outer-wrap"><div class="inner-wrap"><div class="wrap"><header class="clearfix" id="page"><a href="/"><img alt="Agora Games" id="logo" src="/assets/images/agora-games-logo-e99b2824.png"></a><nav><ul><li><a href="https://hydra.agoragames.com/">Products</a></li><li><a href="/portfolio/">Customers</a></li><li><a href="/us/">Team</a></li><li><a href="/community/">Community</a></li><li><a href="/work-at-agora/">Jobs</a></li><li><a href="/blog/">Blog</a></li></ul></nav></header></div><div class="wrap"><article class="clearfix"><header><h1>November 2010</h1></header><section id="blog-entries"><div class="blog-entry"><div class="date-comments"><div class="date">Nov 30</div></div><div class="blog-content"><h2><a href="/blog/2010/11/30/a-better-way-to-avoid-a-project-named-server/">A Better Way to Avoid a Project Named Server</a></h2><div class="blog-author">By <strong>Blake Taylor</strong></div><div class="blog-body"><p>Yesterday I posted about how I avoided creating the annoying rails server projects when accidently running rails server under a rails 2 application. I wanted to follow up with a much more concise script that accomplishes the same ends through different means. Using this script requires no changes to how you start the development server and, even cooler perhaps, allows you to start the rails 2 server as if you were in a rails 3 project. Shout out goes to Intern Mike for the assist.</p>

<p>{% gist 722473 %}</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 30</div></div><div class="blog-content"><h2><a href="/blog/2010/11/30/to-version-or-not-to-version-your-gems-in-gemfiles/">To Version or Not To Version Your Gems in Gemfiles</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>I don't like moving targets. I'm a software developer, not a sharpshooter. So why don't more people version all of their gems in a Gemfile?</p>

<p>Here is a sample Gemfile for a Rails 3 application I was looking at yesterday.</p>

<p>{% gist 721842 %}</p>

<p>The gems for Rails and thin have been versioned. Why aren't the gems for will_paginate, nokogiri, and haml versioned? I consider un-versioned gems moving targets. Why? You're going to get the latest version of a gem. The developer doesn't know (or necessarily care) you depend on XXX functionality in version 1.0.23 of their gem. And so what if in version 2.0.0 of their gem, they make incompatible changes that break your application? I consider versioned gems a virtual "stake in the ground". To the best of my abilities, with rigorous testing of course, I know that given these specific versions of gems, my application performs as expected.</p>

<p>What's your opinion?</p>

<p><strong>UPDATE:</strong></p>

<p>Good point from my co-worker, Blake, who says that bundle will install the lastest version of a gem and then lock the version in your Gemfile.lock file on the first go-round. It could still be an issue if you do a "bundle update" locally or in your deployment process.</p>

<p>You can find more hilarity over on my Twitter account, <a href="http://twitter.com/czarneckid">CzarneckiD</a>.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 29</div></div><div class="blog-content"><h2><a href="/blog/2010/11/29/moving-to-rails-3-pain-point-rails-server/">Moving to Rails 3 Pain Point: rails server</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p><strong>Update:</strong> <em>I have posted a <a href="http://blog.agoragames.com/2010/11/30/a-better-way-to-avoid-a-project-named-server/">better solution</a>!</em></p>

<p>Working with rails 2 and 3 projects back and forth, day to day has been pretty painless thanks to <a href="http://rvm.beginrescueend.com/">rvm</a> and <a href="http://rvm.beginrescueend.com/workflow/rvmrc/">.rvmrc files</a>. That is with the exception of accidentally running <code>rails server</code> on a rails 2 project. I do this all the time and it results in generating a new rails project called server rather then starting the rails server, my actual intention. It's almost as frustrating when running <code>script/server</code> on a rails 3 project but at least it doesn't spit out a bunch of useless files. Incidentally, all of the built in rails command (i.e. generate, console, …) set the same trap. To avoid falling prey, I have created a bunch of shell functions which I would like to share with everyone in case they would like to be privy as well.</p>

<p>The shell code is included in the gist below. I load these functions into my .bashrc file (actually my .zshrc file). Once they are are available just get in the habit of running <code>rails-server</code> or <code>rails-generate</code> or <code>rails-whatever</code> and the correct command will always be issued. Also, if anyone knows a better solution, do share!</p>

<p>As one final note, I run <code>rails-server</code> so often that I have is aliased to <code>s</code> . If you would like to do the same add <code>alias s=rails-server</code> to your .bashrc file.</p>

<p>{% gist  720619 %}</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 24</div></div><div class="blog-content"><h2><a href="/blog/2010/11/24/interactive-git-stash-for-stashing-single-or-multiple-files/">Interactive Git Stash For Stashing Single or Multiple Files</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p><strong>TL;DR</strong> git stash save –patch</p>

<p>From the git docs, "With –patch, you can interactively select hunks from in the diff between HEAD and the working tree to be stashed."</p>

<p>This past week, I came across a situation where I wanted to stash a couple of working files in a git repository, pull in some changes, and then apply the stash. However, I couldn't immediately see the forest for the trees or some other stupid metaphor. Basically it was just a case where I had to RTFM for git stash. In the gist below, I go through a simple example of stashing 2 out of 3 files, making some changes to the repository, and then applying the changes of the 2 stashed files.</p>

<p>{% gist 714660 %}</p>

<p>I hope you found this example useful. I know that it's some git-fu I'll be using more often.</p>

<p>You can find more hilarity over on my Twitter account, <a href="http://twitter.com/czarneckid">CzarneckiD</a>.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 23</div></div><div class="blog-content"><h2><a href="/blog/2010/11/23/agora-games-major-league-gaming-participate-in-the-webs-first-multicast-transmission/">Agora Games & Major League Gaming participate in the web's first multicast transmission</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>When you send a unicast message it gets routed within a network to a single destination.  Unlike unicast messages, multicast messages get delivered to every node within a network.  If not properly controlled however you can experience routing loops which, like feedback between a microphone and a speaker, cause what networking techs call "multicast storms".  Because of this many corporate networks block multicast messages from ever leaving a single broadcast domain.  For the same reason, multicast messages are blocked by all Internet Service Providers at the network's edge.</p>

<p>Apparently it was just a matter of time until someone with a big enough backbone started letting them through.</p>

<p>On November 12, 2010 during Major League Gaming's National Finals in Dallas we working with AT&amp;T and Octoshape to deliver the first open-web multicast video stream.  Who doesn't love the bleeding edge?</p>

<p>Check out the details here:</p>

<p><a href="http://www.attinnovationspace.com/2010/11/23/first-ever-open-web-multicast-event/#more-523">http://www.attinnovationspace.com/2010/11/23/first-ever-open-web-multicast-event/#more-523</a></p>

<p>More musings can be found on my Twitter account, <a href="http://www.twitter.com/genexp">genexp</a></p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 23</div></div><div class="blog-content"><h2><a href="/blog/2010/11/23/haloreachapi-new/">Halo::Reach::API.new</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>If you've ever wanted to access your Halo:Reach statistics from Ruby, you can now using the <a href="https://rubygems.org/gems/halo-reach-api">Halo:Reach Ruby gem</a>.</p>

<p>The API methods should be pretty self-explanatory and you can check out the <a href="http://rubydoc.info/gems/halo-reach-api/1.0.0/frames">gem's RDoc online</a> or look at the <a href="http://www.haloreachapi.net/wiki/Available_methods">unofficial API method documentation</a> for more information. Maybe the one caveat to getting involved in the project or using the API in general is that you need a Bungie Pro account to generate an API key. This will cost you 750 MS points per year. An 800 MS point pack will cost you $10.</p>

<p>You can also get involved in the development of the API over on the <a href="https://github.com/agoragames/halo-reach-api">Halo:Reach Ruby API GitHub project</a>.</p>

<p>You can find more hilarity over on my Twitter account, <a href="http://twitter.com/czarneckid">CzarneckiD</a>.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 22</div></div><div class="blog-content"><h2><a href="/blog/2010/11/22/winning-at-the-career-fair-a-how-to/">Winning at the Career Fair (A How-to)</a></h2><div class="blog-author">By <strong>Clarke Foley</strong></div><div class="blog-body"><p>Recently I had the pleasure of representing Agora Games at two Western New York career fairs held at RIT and my alma mater, University at Buffalo. It was a interesting experience to be on the flip side of the job search process for a change, sitting at our table answering questions, taking resumes, and evaluating applicants' skills to see if they might be the right fit for our team.</p>

<p>One question that was asked repeatedly by fair-goers over the course of the two events was, 'What skills do I need, or what courses should I take, to be the best candidate to work at your company?'. This was a tough question to answer.</p>

<p>The best answer that I could give was, 'There is no predefined skill-set. Today we are looking for Ruby on Rails developers, but tomorrow that may change. In a few months we may be looking for C++ or PHP or Flash devs depending on what we need at the time, so there's no real way to say.'</p>

<p>To hear that probably sounds like a kick in the pants, like there's no way to prepare yourself, but the truth is that the software industry changes so fast that there really isn't any way to predict what technologies will be in style or what skills will be in demand tomorrow. However, there are things you can do to distinguish yourself from other candidates despite this ugly truth. I offered the following prescription:</p>

<ol>
  <li>
    <p>Release code.
 Find or start a project that you're excited about and contribute. It doesn't matter what language or framework, but just get something out there. The best candidates that we found were the ones that showed initiative and put forth extra effort in some little hobby project that they posted on sites like github.</p>
  </li>
  <li>
    <p>Get involved.
 Pick a conference or local user group on some topic that interests you and go! Conferences such as RailsConf, RubyConf, Game Developers Conference (GDC ), and even Penny Arcade Expo (PAX) offer great opportunities to meet and interact with like-minded developers. What could be more fun than hacking on a project together with your new friends? Maybe some of that code could even be released back into the community, or used as samples to show a future employer… hmm…</p>
  </li>
</ol>

<p>In the end, the answer is to do what you love. If your goal is to code, then so do. Get involved and code. The code you produce, experience you gain, and connections you forge will have a beneficial side-effect of making you stand out in any future job search despite any new trend.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 22</div></div><div class="blog-content"><h2><a href="/blog/2010/11/22/going-all-the-way-with-factory_girl-and-rails3-generators/">Going All The Way With factory_girl and rails3-generators</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>I responded to a few tweets from <a href="http://twitter.com/barrettclark">Barrett Clark</a> about <a href="https://github.com/thoughtbot/factory_girl">factory_girl</a> noting that you can get a lot more functionality out of factory_girl than just replacing fixtures. However, let's keep things simple to start and just replace fixtures with factory_girl in a simple Rails 3 application.</p>

<p>I want to replace fixtures in my new Rails 3 projects with factories. One of the best ways of doing that is to start a new Rails 3 project. Let's do that.</p>

<p>{% gist 710407 %}</p>

<p>To add factory_girl functionality, as well as functionality for factory_girl generators, we need to pull in a few gems into our Gemfile.</p>

<p>{% gist 710412 %}</p>

<p>Run "bundle install" to install the gems. Now let us add a scaffold for a person with first_name and last_name attributes.</p>

<p>{% gist 710417 %}</p>

<p>BOOM! We specified a fixture replacement when generating our scaffold using "-r factory_girl". You will also notice that the scaffold generated a people factory in test/factories/people.rb.</p>

<p>{% gist 710424 %}</p>

<p>That factory looks remarkably similar to a fixture, eh? Great, we are ready to run rake and deploy this application to Heroku.</p>

<p>{% gist 710427 %}</p>

<p>Uh oh. Our functional test for the people controller is still living in fixtureville. So, we need to change that test's setup method to use a factory, not a fixture.</p>

<p>{% gist 710439 %}</p>

<p>And if we run our tests again, SUCCESS!</p>

<p>{% gist 710441 %}</p>

<p>If factory_girl and rails3-generators are tiring you out, <a href="http://blog.agoragames.com/2010/04/09/as-it-turns-out-faking-it-is-ok/">you can always fake it</a>. There is also an ASCIIcast that also describes <a href="http://asciicasts.com/episodes/216-generators-in-rails-3">Generators in Rails 3</a>. You can find more hilarity over on my Twitter account, <a href="http://twitter.com/czarneckid">CzarneckiD</a>.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 21</div></div><div class="blog-content"><h2><a href="/blog/2010/11/21/pretty-mysql-listings/">Pretty MySQL listings</a></h2><div class="blog-author">By <strong>Jason LaPorte</strong></div><div class="blog-body"><p>Tired of MySQL wrapping long rows when running selects from the command line?  Here's a crazy useful tip:  add \G to the end of your 'select' statement and your output will go from gobbledygook to great.</p>

<p>Here's an example:</p>

<p>{% gist 709399 %}</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 19</div></div><div class="blog-content"><h2><a href="/blog/2010/11/19/ssh-on-os-x-mounting-a-remote-directory-easily/">SSH on OS X: mounting a remote directory easily</a></h2><div class="blog-author">By <strong>Armando DiCianno</strong></div><div class="blog-body"><p>There are many things you can do quickly, and easily, once you have your ssh keys automatically added to your keychain on OSX. One of the more fun things is using MacFUSE to allow you to automatically mount a directory on a remote machine, as if it was a remote share in Finder. This post will show you how.</p>

<p><strong>CAVEAT</strong>: before attempting the steps in this post, please reference <a href="http://blog.agoragames.com/2010/11/17/ssh-keys-agents-and-automation/">my last post</a> about how to setup your ssh keys on OS X.</p>

<hr />
<p>First, dowload and install <a href="http://code.google.com/p/macfuse/">MacFuse</a> if you don't have it yet. You may have it if you've installed 3rd party products like VMware. A good place to check is System Preferences — if you see a control panel for it, click on it, and if it's above version 2.0, then you're good to go. You can download MacFUSE <a href="http://code.google.com/p/macfuse/downloads/list">here</a>, if you don't have it yet.</p>

<p>For the rest of this document, I've generally followed the instructions laid out <a href="http://code.google.com/p/macfuse/wiki/MACFUSE_FS_SSHFS">here</a>, which you may want to referenced.</p>

<p>Run the following sequence of commands in Terminal. Note that you can change the location of "MYDIR", to a spot you prefer. You will need Subversion (svn) installed. The installation of svn is beyond the scope of this post, but consider installing it via <a href="http://www.macports.org/">MacPorts</a>. <strong>UPDATE</strong>: It was pointed out to me that subversion actually ships with OS X, at /usr/bin/svn, so you probably have it installed already.</p>

<p>{% gist 705731 %}</p>

<p>That was pretty straightforward. Now you're ready to test mounting the remote directory. You're going to need a remote server that you can already ssh into. I use the Bash variables VOLNAME and SRVNAME as the name of the folder I want to create locally, and the remote server name, respectively. You'll need to edit these to your liking and needs.</p>

<p>{% gist 705741 %}</p>

<p>Awesomesauce, looks like everything worked. Now, let's automate things a bit, and make a little GUI app that you can click on to mount the share in AppleScript. I've not made this AppleScript too advanced, so make sure to use the fully expanded commands from above. Open "AppleScript Editor", and enter the following code.</p>

<p>{% gist 705745 %}</p>

<p>After you've entered that code into "AppleScript Editor", you're going to want to save it twice.
- Save As -&gt; File Format: Script , for reference.
- Save As -&gt; File Formar: Applicaiton (to run)</p>

<p>Save the application version to somewhere handy for you, such as your Desktop.</p>

<p>For extra bonus points, here's what I do:
- Find a small image, via screen shot, or otherwise, and save it to your Desktop.
- Open the image in Preview, Select All, and Copy.
- Context-click on your AppleScript-saved-as-Application, and select "Get Info"
- Click once on the small icon at the top of the pane that opens.
- Paste.
… and <em>voilà!</em>, you have a handy, easily referencable application-type icon, that you can click on to mount your remote share.
Enjoy, my friends!</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 19</div></div><div class="blog-content"><h2><a href="/blog/2010/11/19/html-and-css-horizontal-delimited-navigation-done-right/">HTML and CSS Horizontal Delimited Navigation Done Right</a></h2><div class="blog-author">By <strong>Joshua Childs</strong></div><div class="blog-body"><p>When we, as front-end developers, set out to build a horizontal site navigation, what markup come to mind? Thoughts of a standard semantic design pattern, an unordered list (UL) with list items (LI) floated to one side, possibly with delimited items to help visually separate each link.</p>

<p>This design pattern generally produces markup that looks something like:</p>

<p>{% gist 704052 %}</p>

<p>And styling like:
 {% gist 704057 %}</p>

<table>
  <tbody>
    <tr>
      <td>This doesn't look so bad, but there's a problem. Those pipes (</td>
      <td>) don't belong in the markup. Because they don't describe any piece of the document, and they are not content, they are purely presentational. As such, they belong in the presentation layer (stylesheets).</td>
    </tr>
  </tbody>
</table>

<p>For a some time now, front-end developers have had to settle for mixing content and presentation in order to maintain a single experience across browsers and platforms due to inconsistent implementations of css2.</p>

<p>Today, notions of one user experience for a website have been shattered by paradigm shifts such as increased market penatration of mobile browsing devices. This shift combined with improved client support for css2 and css3 modules, as seen in IE9pr3, has given us the freedom to build similar but different experiences for users. We are free to build on strengths of each browser while accepting that some browsers may not fully support the presentational features desired.</p>

<p>With that in mind:</p>

<p>{% gist 704060 %}</p>

<table>
  <tbody>
    <tr>
      <td>Our navigation markup now looks the way it should, meaning it's a list of links in no particular order, with only relevant content. There are no pipes (</td>
      <td>) or other delimiters meant only for presentation purposes. The wrapping DIV element has been substituted with a NAV element to be more descriptive.</td>
    </tr>
  </tbody>
</table>

<p>The following CSS does the same basic styling as the first, but notice the last two rules.
 {% gist 704064 %}</p>

<p>The last two rules are how we're able to put those delimiters in the presentation layer. Let's take a closer look.
 {% gist 704067 %}</p>

<p>This rule is adding the pipe (|) delimiter to all of the list (LI) element that have nav.site-nav as their ancestor.
 {% gist 704069 %}</p>

<table>
  <tbody>
    <tr>
      <td>And here we look up the last list item (LI) of our unordered list (UL) and remove the pipe delimiter (</td>
      <td>) we added with the previous rule.</td>
    </tr>
  </tbody>
</table>

<p>Some of you may be saying that this won't work in all browsers (&lt; IE9pr3, &lt; FF3, &lt; Safari4, ect). This is true, it won't work in all browsers, but when you're thinking about doing something like this, ask yourself, "Do I need this for users to be able to use my site?" If yes, then by all means put those load bearing delimiters in your markup. If no, enjoy the knowledge that you can have a more semantic html document, a stylesheet file that takes advantage of modern implementations of css, and a flexible user experience that degrades gracefully in older browsers. Make the move to more cleanly separated content and presentation layers.</p>

<p>You can find more of my musings on the Twitters,  <a href="http://twitter.com/JoshuaChilds">@JoshuaChilds</a>.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 18</div></div><div class="blog-content"><h2><a href="/blog/2010/11/18/working-at-agora-binary_review-1/">Working at Agora #binary_review 1</a></h2><div class="blog-author">By <strong>An Intern</strong></div><div class="blog-body"><p>The following is a (long) binary review of Henryk's experience while working as an intern on the platform team at Agora:</p>

<blockquote>
  <p>For the last 9 months, I co-op'd with Agora as an engineer on the Platform Team. Overall, I'd say the experience was awesome. I had a lot of fun on this co-op. Working at Agora was awesome for many reasons, the people are really friendly, the actual work is difficult and fun, and culture around this company makes working here awesome. I got to do so much here, and learn so much, even putting the programming knowledge aside I've learned so much.</p>
</blockquote>

<p>The people here are awesome. This needed to be repeated for great justice. Everyone here is very welcoming and friendly. They make an attempt to connect with you and help you whenever you're stuck. Everyone listens to what you say and then provides valuable feedback. I always felt like I could ask questions without hesitation. And whenever I did have a problem, I either had someone looking at my screen with me or explaining where I could go to find out more about my problem.</p>

<p>The work here is awesome. For the majority of my co-op, I redesigned and developed the hydra dashboard from the ground up. This was no easy task and required a lot of work. This also included many upgrades from the original that required even more work. I love that I was responsible for such a huge task and that I had so much to work on. Several things had to happen for this be to be complete, a well designed user account system; a better visualization of talking to hydra/simplifying complex data inputs; and getting a new design/layout integrated with the current functionality to mention a few things. Each of these required a sufficient amount of planning, design, and work. And I got to become very skilled with recursion in solving these problems. I learned so much here at this co-op, that I was even inspired to make my own website with the skills I developed here. As a result of working here, I feel like I can solve pretty much any problem if I just learn about it.</p>

<p>The culture here is awesome. I feel comfortable with everyone here, the environment is very relaxed. There's always amusing chat in campfire, we play video games, and we go to lunch for wings regularly. In all seriousness though, it's a very easy environment to settle into. Agora also has hackathons infrequently. These are days when you're part of a team and work for the whole day on one project as a team (come in at midnight if you want!). Even outside of work, you see people doing stuff. Whether it be at a local restaurant, or hosting barbecues, or playing halo on a friday night, it's a fun time working at Agora.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 17</div></div><div class="blog-content"><h2><a href="/blog/2010/11/17/ssh-keys-agents-and-automation/">SSH keys, agents, and automation</a></h2><div class="blog-author">By <strong>Armando DiCianno</strong></div><div class="blog-body"><p>The basis of automating tasks with ssh is setting up your ssh-agent to hold your unlocked keys. Basically, this means never having to type in a password more than once. If you frequently ssh into, run commands on, or copy files to a remote machine, typing in a passphrase over and over gets very tedious.</p>

<p>This post explores integrating one or multiple ssh keys into a normal OS X user session. You'll learn how to create keys, and add them to your OS X Keychain, so you never need to type in your password, after log in, and still have a high level of security.</p>

<p>The author Rita Mae Brow (or Albert Einstein, as the consensus is still out, it seems) was the first that said, "Insanity is doing the same thing over and over again but expecting different results." This is a quote I was thinking about today, when I automated another task related to SSH that I commonly do manually: mounting a directory on a remote server over SSH on OS X.</p>

<p>SSH is one of those protocols that has a very mature suite of tools around it. There are so many wonderful, easy things to do or change that make your workflow more efficient if you use SSH. SSH has first class support in GNU/Linux distributions and Mac OSX, and it can be configured readily into a streamlined workflow.</p>

<p>I use OS X at work, and GNU/Linux on my home machines. This post represents the little bit of learning I had to do to make my nice, automated Linux setup work well on OS X at work. I'm going to go over the basics of ssh key management on OS X in this post, and follow up in another post with mounting a remote directory</p>

<hr />
<p>First, you should already be using ssh to log into remote machines! Hopefully, you're already using ssh keys. If not, here's a quick example about how to setup your first key. The username on my machine is ' <a href="http://en.wikipedia.org/wiki/Fafhrd_and_the_Gray_Mouser">fafhrd</a>', but you should replace that with your own username in the following examples. So, open up Terminal, and …</p>

<p>{% gist 703566 %}</p>

<p>Let's use ssh-add to check the keys in the agent. Note that for some commands, I use the full path. If you're running an install of ssh from <a href="http://www.macports.org/">MacPorts</a> or <a href="http://www.gentoo.org/proj/en/gentoo-alt/prefix/">Gentoo Prefix</a>, you may have to use the full path as well to get the built-in OS X version; this only matters for adding keys.</p>

<p>{% gist 703572 %}</p>

<p>Do you not see any return value? Let's add your key to the agent. In my case, I'm going to add a second key, as well. The following commands will add your keys to the ssh-agent daemon (background process). However, we also want to add the keys to the OS X keychain, so that they're automatically unlocked for you when you log in, so we add the -K flag. This flag does not exist on a stock openssh install, only on the ssh that ships with OS X. Without that flag, the key is only added to the currently running ssh-agent. Note that I'm adding both my keys, and you may just have one. (If your key is already in the keychain, there's no harm adding it again.)</p>

<p>{% gist 703574 %}</p>

<p>At this point, it's important to reboot. Alternatively, if you feel comfortable killing all instances of ssh-agent that are running, you may do so, log out, and log back in. After doing either, open Terminal again, and check for your keys.</p>

<p>{% gist 703576 %}</p>

<p>Great! keychain automatically unlocked the keys for you. Okay, it's time to try it out! If you haven't copied your public keys to your remote server, you should do so now. Your public key is most likely located at ~/.ssh/id_dsa.pub (or id_rsa.pub). Please be sure to use the .pub file, and not the private key! You will want to append (and not necessarily replace) the public key into the file ~/.ssh/authorized_keys, on the remote side.</p>

<p>{% gist 703577 %}</p>

<p>… and test:</p>

<p>{% gist 703582 %}</p>

<p>Nice! The uname command ran on the remote server, and retuned it's data. You should not have been prompted for your password as the credentials are coming straight from your agent.</p>

<p>So what have you actually accomplished? All commands that can use ssh, bundled with the ssh tools (e.g. scp, sftp) or otherwise (e.g. rsync, git, svn), will now never prompt you for your ssh passphrase. This should speed up your workflow, and allow your to automate more of your work. One caveat, though: make sure to lock your workstation when you leave your desk, if you're in an untrusted environment, as someone can open up Terminal, and log into your remote servers easily. However, for the flexibility this automation provides, it's a worthwhile tradeoff.</p>

<p>Let's take this one step further. Want to type even less, by avoiding the "myname@" portion of the ssh command? Create or edit ~/.ssh/config to look like the following.</p>

<p>{% gist 703627 %}</p>

<p>… and now test without the "myname@" portion.</p>

<p>{% gist 703634 %}</p>

<p>The username piece, for any host that matches *.fake.com, automatically uses "myname". Wow, there's so much win right there, it brings a tear to my eye.</p>

<p>In my next post, I'm going to go over mounting remount directories over ssh on OS X. Until then: have fun!</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 16</div></div><div class="blog-content"><h2><a href="/blog/2010/11/16/coding-by-example/">Coding by Example</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>I don't think there's anything inherently wrong in coding by example, e.g. cutting and pasting code from a sample that works for you. But, I would like to advocate for making at least minimal changes to update the code for your application or domain.</p>

<p>Consider the following factory which creates an account.</p>

<p><code>ruby
Factory.define(:account) do |f|
  f.first_name { Factory.next(:name) }
  f.last_name { Factory.next(:name) }
end
</code></p>

<p>What's wrong here? Nothing? What if we change the code to be the following?</p>

<p><code>ruby
Factory.define(:account) do |account|
  account.first_name { Factory.next(:name) }
  account.last_name { Factory.next(:name) }
end
</code></p>

<p>IMO, the second code example is more self-documenting. Obviously we know we're working with a factory, but it's for an account object, and we're being explicit about the attributes being applied to an account object, not some f object which just happens to be an account object.</p>

<p>You can find more hilarity over on my Twitter account, <a href="http://twitter.com/czarneckid">CzarneckiD</a>.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Nov 3</div></div><div class="blog-content"><h2><a href="/blog/2010/11/03/py-amqplib-with-large-messages/">py-amqplib with Large messages</a></h2><div class="blog-author">By <strong>Aaron Westendorf</strong></div><div class="blog-body"><p>At the core of our Hydra platform is AMQP, currently we are using the py-amqplib driver. It has worked well up to this point. We recently had a requirement to send large messages through AMQP, this is where the driver failed us. The following are couple benchmarks and fix to get around the issue.</p>

<p>```python
»&gt; from amqplib import client_0_8 as amqp
»&gt; import time</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>conn = amqp.connection.Connection()
chan = conn.channel()
msg = amqp.Message("1"*(1048576*100))
s = time.time(); chan.basic_publish(msg); print time.time() - s
54.5186219215
```</p>
    </blockquote>
  </blockquote>
</blockquote>

<p>Most of the 54 seconds above was being used in packing the message. This is caused by the following code:</p>

<p>```python
def write_method(self, channel, method_sig, args, content=None):
  payload = pack('&gt;HH', method_sig[0], method_sig[1]) + args</p>

<p>self.dest.write_frame(1, channel, payload)</p>

<p>if content:
    body = content.body
    payload = pack('&gt;HHQ', method_sig[0], 0, len(body)) + \
    content._serialize_properties()</p>

<p>self.dest.write_frame(2, channel, payload)</p>

<p>while body: # HH', method_sig[0], method_sig[1]) + args</p>

<pre><code>self.dest.write_frame(1, channel, payload)
</code></pre>

<p>if content:
    body = content.body
    payload = pack('&gt;HHQ', method_sig[0], 0, len(body)) + \
    content._serialize_properties()</p>

<p>self.dest.write_frame(2, channel, payload)</p>

<p>for payload in self._chunk_body(body, self.frame_max - 8):
    self.dest.write_frame(3, channel, payload)
```</p>

<p>If we run the same test as above with the patched writer_method here is the result:</p>

<p>```python
»&gt; from amqplib import client_0_8 as amqp
»&gt; import time</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>conn = amqp.connection.Connection()
chan = conn.channel()
msg = amqp.Message("1"*(1048576*100))
s = time.time(); chan.basic_publish(msg); print time.time() - s
0.23295211792
```</p>
    </blockquote>
  </blockquote>
</blockquote>
</div></div></div></section><aside id="sidebar"><div class="block" id="block-archive"><h2>Blog archives</h2><h3>2013</h3><ul><li><a href="/blog/2013/11/">November 2013</a></li><li><a href="/blog/2013/10/">October 2013</a></li><li><a href="/blog/2013/09/">September 2013</a></li><li><a href="/blog/2013/08/">August 2013</a></li><li><a href="/blog/2013/07/">July 2013</a></li><li><a href="/blog/2013/06/">June 2013</a></li><li><a href="/blog/2013/05/">May 2013</a></li><li><a href="/blog/2013/04/">April 2013</a></li><li><a href="/blog/2013/03/">March 2013</a></li><li><a href="/blog/2013/02/">February 2013</a></li><li><a href="/blog/2013/01/">January 2013</a></li></ul><h3>2012</h3><ul><li><a href="/blog/2012/12/">December 2012</a></li><li><a href="/blog/2012/11/">November 2012</a></li><li><a href="/blog/2012/10/">October 2012</a></li><li><a href="/blog/2012/09/">September 2012</a></li><li><a href="/blog/2012/08/">August 2012</a></li><li><a href="/blog/2012/07/">July 2012</a></li><li><a href="/blog/2012/06/">June 2012</a></li><li><a href="/blog/2012/05/">May 2012</a></li><li><a href="/blog/2012/04/">April 2012</a></li><li><a href="/blog/2012/03/">March 2012</a></li><li><a href="/blog/2012/02/">February 2012</a></li><li><a href="/blog/2012/01/">January 2012</a></li></ul><h3>2011</h3><ul><li><a href="/blog/2011/10/">October 2011</a></li><li><a href="/blog/2011/09/">September 2011</a></li><li><a href="/blog/2011/08/">August 2011</a></li><li><a href="/blog/2011/07/">July 2011</a></li><li><a href="/blog/2011/06/">June 2011</a></li><li><a href="/blog/2011/05/">May 2011</a></li><li><a href="/blog/2011/04/">April 2011</a></li><li><a href="/blog/2011/03/">March 2011</a></li><li><a href="/blog/2011/02/">February 2011</a></li><li><a href="/blog/2011/01/">January 2011</a></li></ul><h3>2010</h3><ul><li><a href="/blog/2010/12/">December 2010</a></li><li><a href="/blog/2010/11/">November 2010</a></li><li><a href="/blog/2010/10/">October 2010</a></li><li><a href="/blog/2010/09/">September 2010</a></li><li><a href="/blog/2010/08/">August 2010</a></li><li><a href="/blog/2010/07/">July 2010</a></li><li><a href="/blog/2010/06/">June 2010</a></li><li><a href="/blog/2010/05/">May 2010</a></li><li><a href="/blog/2010/04/">April 2010</a></li><li><a href="/blog/2010/03/">March 2010</a></li><li><a href="/blog/2010/02/">February 2010</a></li><li><a href="/blog/2010/01/">January 2010</a></li></ul><h3>2009</h3><ul><li><a href="/blog/2009/12/">December 2009</a></li><li><a href="/blog/2009/11/">November 2009</a></li><li><a href="/blog/2009/10/">October 2009</a></li><li><a href="/blog/2009/09/">September 2009</a></li><li><a href="/blog/2009/08/">August 2009</a></li><li><a href="/blog/2009/07/">July 2009</a></li><li><a href="/blog/2009/06/">June 2009</a></li><li><a href="/blog/2009/05/">May 2009</a></li><li><a href="/blog/2009/04/">April 2009</a></li><li><a href="/blog/2009/03/">March 2009</a></li><li><a href="/blog/2009/02/">February 2009</a></li><li><a href="/blog/2009/01/">January 2009</a></li></ul><h3>2008</h3><ul><li><a href="/blog/2008/11/">November 2008</a></li><li><a href="/blog/2008/10/">October 2008</a></li><li><a href="/blog/2008/09/">September 2008</a></li><li><a href="/blog/2008/08/">August 2008</a></li></ul></div></aside></article></div></div></div><footer><div class="outer-wrap"><div class="wrap"><div id="copyright"><img alt="Agora Games" src="/assets/images/agora-logo-agga-7c1d9a1f.png"> <a href="http://majorleaguegaming.com" target="_blank"><img alt="Major League Gaming" src="/assets/images/mlg-logo-28545055.png"></a><a href="mailto:info@agoragames.com" id="email-us">Email Us</a><p>359 Broadway, Third Floor, Troy, NY 12180</p><p class="dim">&copy; 2013 Agora Games. All Rights Reserved.</p></div></div></div></footer><div class="hide"><iframe id="wufoo-iframe" src="javascript:void(0)"></iframe><a id="wufoo-thanks" href="/thanks/"></a></div><!--[if lt IE 9]>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<!--<![endif]-->
<script>
  if (!window.jQuery) {
    document.write('<script type="text/javascript" src="/assets/javascripts/vendor/jquery.min-199fc76d.js"><' + '/script>');
  }
</script>
<script src="/assets/javascripts/all-7e4f2f03.js" type="text/javascript"></script></body></html>