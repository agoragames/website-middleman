<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width" name="viewport"><title>Brain Matters</title><link href="/assets/images/favicon.ico" rel="shortcut icon"><link href="/assets/stylesheets/all-f38fbbc7.css" media="all" rel="stylesheet" type="text/css" /><!--[if lt IE 9]><script src="/assets/javascripts/vendor/html5shiv-8b3747c5.js" type="text/javascript"></script><![endif]--></head><body><div class="outer-wrap"><div class="inner-wrap"><div class="wrap"><header class="clearfix" id="page"><a href="/"><img alt="Agora Games" id="logo" src="/assets/images/agora-games-logo-be83adf8.png"></a><nav><ul><li><a href="https://hydra.agoragames.com/">Products</a></li><li><a href="/portfolio/">Customers</a></li><li><a href="/us/">Team</a></li><li><a href="/community/">Community</a></li><li><a href="/work-at-agora/">Jobs</a></li><li><a href="/blog/">Blog</a></li></ul></nav></header></div><div class="wrap"><article class="clearfix"><header><h1>October 2010</h1></header><section id="blog-entries"><div class="blog-entry"><div class="date-comments"><div class="date">Oct 29</div></div><div class="blog-content"><h2><a href="/blog/2010/10/29/brightcove-gem-1-0-3/">Brightcove gem 1.0.3 </a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>I just pushed out version 1.0.3 of the <a href="http://github.com/agoragames/brightcove">Brightcove gem</a>. This version adds support for performing a file upload, which is useful if you need to create a video in <a href="http://www.brightcove.com/">Brightcove</a>. I did have to add a dependency for <a href="http://github.com/archiloque/rest-client">Rest-Client</a> to support the multipart file upload. Thankfully it all just worked.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Oct 28</div></div><div class="blog-content"><h2><a href="/blog/2010/10/28/random-number-entropy-xen-and-you/">Random Number Entropy, Xen, and You</a></h2><div class="blog-author">By <strong>Jeff Hagadorn</strong></div><div class="blog-body"><p>Here at Agora Games, we are strong proponents of cloud computing for a number of reasons. The ability to scale outward quickly in a time of need continuously aids our processes, encouraging rapid growth and timely response when load increases past the threshold of what our infrastructure can handle. As such, we tend to run most of our applications on scalable cloud providers.</p>

<p>Recently, we decided to move one of our older sites to Rackspace Cloud, which is a relative newcomer to the cloud market who uses Xen for their hypervisor of choice. Here at Agora, we use an efficient application stack that consists of NGINX, which proxies back to haproxy, which in turn load balances to many FastCGI app servers on our backend in order to do the heavy PHP lifting in the most efficient way possible. We have been very happy with the results so far.</p>

<p>After deploying this old site on these shiny new cloud hosts, everything appeared to work great. The site was faster than ever, we had brought all of the web server configs up to date (translated from Apache, which was used on the old hardware based servers), and tuned everything to be lightning quick. Finally, the celebrated day to flip the switch came…</p>

<p>…and the site fell flat on its face within seconds.  All of the servers were idle, memory usage was minimal, there were no IO bottlenecks – we were stumped.</p>

<p>Eventually, we took out an engineer's best friend – strace. Upon running stracing the php threads, we found that each site load was polling from <code>/dev/random</code>, which these days is about as far from a best practice as you can get. Examining the entropy pool, it turned out that it was continuously draining, and waiting to refill, and some old Crypt routines were to blame. We instructed php-mcrypt to use <code>/dev/urandom</code> by way of ﻿﻿﻿﻿<code>MCRYPT_DEV_URANDOM</code>, and pushed the site live again. Suddenly, all servers went green. Success!</p>

<p>To get down to it, the problem is with Xen and how it's virtual drivers work. Apparently, the virtual drivers do not add to the entropy pool for the system's random number generator, causing the pool to empty extremely quickly. The Xen team has known about this problem for a number of years, however it appears they have not fixed it. Using /dev/urandom, which one should always do anyway, eliminates this problem by providing a nonblocking source for random seeding. Yet more proof that going over old code and fixing bad practice can often prove beneficial. :)</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Oct 27</div></div><div class="blog-content"><h2><a href="/blog/2010/10/27/resque-and-resque-unit-in-rails-3/">Resque and Resque Unit in Rails 3</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>Do you need to create background jobs, place those jobs on multiple queues, and process them later? And do you want to test your queue appropriately? Are you using Rails 3?</p>

<p>If your answer to those questions is yes, then you're probably already looking at and using <a href="http://github.com/defunkt/resque">Resque</a> and <a href="http://github.com/justinweiss/resque_unit">Resque Unit</a>. I really just want to cover the nice part about using these libraries in Rails 3. Let's cover the basic setup.</p>

<p><code>Gemfile</code></p>

<p>```ruby
 # Redis/resque</p>

<p>gem 'resque', '1.8.2'
 gem 'redis', '2.0.12'
 gem 'redis-namespace', '0.10.0'</p>

<p>group :test do
 gem 'factory_girl_rails', '1.0'
 gem 'mocha', '0.9.8'
 gem 'resque_unit', '0.2.6'
 end
```</p>

<p><code>config/initializers/resque.rb</code></p>

<p>```ruby
 require 'resque'</p>

<p>redis_config = YAML.load_file("#{Rails.root}/config/redis.yml")
 Resque.redis = redis_config[Rails.env]
 Resque.redis.namespace = "resque:company:namespace"
```</p>

<p><code>config/redis.yml</code></p>

<p><code>ruby
 development: localhost:6379
 test: localhost:6379
 staging: localhost:6379
 production: localhost:6379
</code></p>

<p>Here's the kicker. As we're defining resque_unit in the "test" group in our Gemfile, it's going to "provide a mock Resque for testing Rails code that depends on Resque". Now we can make assertions in our tests about data
 in Resque without having to have Resque running. Pretty simple right?</p>

<p>P.S. The answer to that last question is "yes".</p>

<p>P.P.S. My code in the Gemfile does have indentation, the code formatter on our blog sucks.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Oct 25</div></div><div class="blog-content"><h2><a href="/blog/2010/10/25/hang-in-there-baby/">Hang In There Baby</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p><img alt="" alt="" width="230" height="230" src="/assets/images/uploads/2010/10/Hang-in-There-baby-Inspiration_0E75780C-19617fa2.jpg" /></p>

<p>How long should you keep a git fork around?</p>

<p>Here's the flow: I forked <a href="http://github.com/raw1z/amistad">Amistad</a>, a library for friendships management in Rails 3, to add blocking friends support. I wrote the code, tests, and updated documentation. I generated a pull request for my changes. The author of the library merged those changes into the master branch for Amistad.</p>

<p>**So, how long should I keep my git fork around? **</p>

<p>After writing this post, I'm going to remove the fork because the changes have been integrated into the master branch. I assume that's a reasonable thing to do as there's no divergence between my copy and master. And I don't want anyone to search for my branch, find it, use it, and then later have issues that a) need to be fixed or b) want to contribute more functionality. I want all of that to happen in the library's master branch.</p>

<p>Is that reasonable? Or is there a period of time I should keep my fork around for? Am I overthinking this? I'd just like to know if there's a better workflow or standard that the community has adopted in this regard.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Oct 25</div></div><div class="blog-content"><h2><a href="/blog/2010/10/25/amistad-friendships-in-rails-3/">Amistad: Friendships in Rails 3</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>If you're looking for a way to do friendships in Rails 3, you might have a look at <a href="http://github.com/raw1z/amistad">Amistad</a>. I added support for blocking friendship requests and <a href="http://github.com/raw1z/amistad/commit/28ad024bda7a46a28de13a65d499e2318aa4c352">those changes</a> have been integrated into master. One of the benefits of contributing this code was I got some exposure to <a href="http://rspec.info/">RSpec</a>.</p>

<p>Enjoy!</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Oct 19</div></div><div class="blog-content"><h2><a href="/blog/2010/10/19/getting-cozy-with-shorthand-css-properties/">Getting Cozy with Shorthand CSS Properties</a></h2><div class="blog-author">By <strong>Joshua Childs</strong></div><div class="blog-body"><p>I pride myself in being forgetful, but sometimes this can have unfortunate consequences. For instance, whenever I want to use the <a href="http://www.devarticles.com/c/a/Web-Style-Sheets/CSS-shorthand-at-a-glance/3/">css background shorthand property</a> I simply can't remember the order.</p>

<p>In case you aren't aware, the background shorthand basically allows you to specify a background all at once, that would otherwise need to be specified with multiple rules.</p>

<p>For example</p>

<p><code>css
background-color: black
background-attachment: fixed
background-position: left top
background-repeat: no-repeat
background-image: url(example.gif)
</code></p>

<p>simply becomes</p>

<p><code>css
background: url(example.gif) no-repeat fixed left top black
</code></p>

<p>And the whole world is happy…</p>

<p>As I mentioned the problem is I find it difficult to remember the order, and it seems that there is an order that should be followed, if for no reason other than consistency. As a result I always find myself turning to Google to remember what that order is. This is frustrating, but even more frustrating Google never returns the result I'm looking for and I end up leafing through several results to eventually stumble upon a code example that can help me.</p>

<p>Well, not anymore! Turns out there is an easier way then this and one which doesn't require me to resort to hardcore memorization (my only weakness). As anyone who really knows me is already aware, I love <a href="http://getfirebug.com/">Firebug</a>. The reasons go on and on, but now I have a new one. Firebug automatically fixes the background style rule providing the complete and proper format. If you specify a background rule and just give it say a color, or take your best shot at specifying all the properties you need then leave the style pane for a second or two and close your eyes, by the time you come back Firebug would have parsed and updated your best effort with the correct format. How nice.</p>

<p>Once I realized this, I couldn't help but share my excitement with some of the fellows around the office. Well, our new teammate Nick pointed out that it would be cool if this worked for the font shorthand as well; I thought so too. As it turns out however, it does not. That's really too bad, but maybe we will see this feature come along in the future. I think it would be a welcomed addition all around to an already spectacular tool. Thanks Firebug!</p>

<p>For anyone who wants to know a little more about all the CSS shorthand rules here is a <a href="http://www.devarticles.com/c/a/Web-Style-Sheets/CSS-shorthand-at-a-glance/">nice article I found on the nets about it</a>.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Oct 11</div></div><div class="blog-content"><h2><a href="/blog/2010/10/11/agora-visits-the-university-at-albany-career-fair/">Agora visits the University at Albany Career Fair </a></h2><div class="blog-author">By <strong>Clarke Foley</strong></div><div class="blog-body"><p>Ernst and Young recruiters gave away silver pens, designer platinum-cased post it notes and travel coffee mugs. KPMG gave away environmentally friendly thermos bottles and key chains. They also had a really, really nice sign.</p>

<p>Then there was Agora Games…
Being new to the recruiter role, Blake and I wore our beards and normal work attire, which included one mohawk and an obnoxious pair of florescent yellow Nikes. While perhaps not as sharp as other recruiter’s suits and ties, we were definitely dressed for success.</p>

<p>The UAlbany Career fair saw hundreds of students from several degree programs trying to get a feel for which industries and companies were scouting future hires. As the university is known for its strong business school, we were offered numerous resumes from accounting, business administration and communications majors. A welcomed change of pace from our everyday engineering-focused mindset, it was interesting to chat with English majors, marketing majors, and the surprisingly frequent–and not surprisingly somewhat pushy–“my boyfriend plays video games all the time, can he work there?” career fair candidate.</p>

<p>As interesting as this was, we were on a mission that was a bit more technically focused. Our goal: track down as many people as possible who were interested in Ruby on Rails, Python, JQuery, or Flash, while using our less than KPMG-worthy sign. We were given resumes from computer science  and information science majors, and information technology management buffs. Scouring the selection, scarcely did we find that "gem" we were looking for…literally, nobody knew what a Ruby Gem was. (har har!) All puns aside, we're continually finding this to be the case at most of the college career fairs we visit. In this university setting, to a polytechnic institute setting, (yes, reference intended), it seems that the most valuable coding language and most sought-after job skill in today’s software development field is concurrently the least taught.</p>

<p>As we collected information on the student’s school-based skill sets, it was clear that the top engineer of tomorrow might also be the person who is learning coding languages on their own. Take heed, soon-to be-grads; spend a few weekends brushing up on some of the aforementioned languages. Scout outside the classroom walls to see what languages the smaller, innovative companies are using. Scour Craigslist to get a feel for what types of development work is being outsourced in your area. Who knows, you might see Blake and I at your upcoming career fair, mohawks and yellow sneakers adorned, looking for the next Ruby Wizard.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Oct 7</div></div><div class="blog-content"><h2><a href="/blog/2010/10/07/testlink-bringing-order-to-testing/">Testlink - bringing order to testing</a></h2><div class="blog-author">By <strong>Devon Smith</strong></div><div class="blog-body"><p><a href="http://www.teamst.org/"> <img alt="TestLink" title="testlink_logo_2" src="http://ladybug010.wordpress.com/files/2009/12/testlink_logo_2.jpg?w=150" /> </a></p>

<p>If you start searching for test tracking and management software, you will run into Testlink. Although far from perfect, Testlink does some pretty cool things.  In the past, I kept track of my tests on proprietary software or open office spreadsheets, which are functional- but the organization offered by testlink moved my whole testing approach to a new level.</p>

<p><strong>The Good:</strong></p>

<p>Open Source</p>

<p>Test case/requirements/test plan organization</p>

<p>requirements management</p>

<p>requirements based testing</p>

<p>result reporting</p>

<p>central location for assigning, approving and executing tests</p>

<p><strong>The Bad:</strong></p>

<p>It is a bit clunky to use</p>

<p>UI is pretty horrible</p>

<p>Minor bugs and unfinished features</p>

<p>Isn't set up for a ton of integration- but there is an API</p>

<p><strong>The results:</strong></p>

<p>This tool opens up the testing process for anyone on the project to be aware of what QA is working on. Communication between QA and Devs can be improved (as everyone can access and review test cases or requirements), and the approval process is much easier and more organic than holding a big meeting. Test link has the potential for seamless integration with bug filing  helping to carefully order and maintain a tester's world. It doesn't come pre-linked to much, but the site does offer some instructions on setting it up yourself. It does offer a good user guide and a pretty active community for support.</p>

<p>You can input your documents (I haven't found a way to do this automatically, but manually putting them in does ensure that you do careful ambiguity review) and then link each requirement to a test case, or generate test cases right from the requirement. The execute section can accept xml results and notes. Testlink automatically generates test plans and test reports with data from the system, so you can put out a document that shows your test plan, and then gives overviews of your test cases and tracks the requriements. It has been extremely useful for increasing transparency in the QA department and keeping everyone involved with the process. There is a way to create custom fields, which I have been used for test plan approvals and linking to bugs filed from the execute screen.</p>

<p>In all, it is a great program- that could use some finishing tweaks and an UI overhaul. I can look past its flaws though for the functionality it provides. The functionality really is pretty cool. For multiple projects and teams, it makes organizing the test process easy.  Testlink is a great little program that can act as a hub for testing related activities.</p>
</div></div></div><div class="blog-entry"><div class="date-comments"><div class="date">Oct 6</div></div><div class="blog-content"><h2><a href="/blog/2010/10/06/data-relationships-in-nosql/">Data relationships in NoSQL (P.S. They're real and they're spectacular)</a></h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>Do people really think there are no relationships between data in NoSQL databases? Or that they're doomed from the start?</p>

<p><img alt="" title="This Relationship Is Doomed" src="http://www.nataliedee.com/092808/this-relationship-is-doomed.jpg" /></p>

<p>I'm going to demonstrate a very simple relationship among data using <a href="http://www.mongodb.org/">MongoDB</a> and <a href="http://mongoid.org/">Mongoid</a>.</p>

<p>Let's first define a user.</p>

<p>```ruby
class User
  include Mongoid::Document
  include Mongoid::Timestamps</p>

<p>attr_protected :_id</p>

<p>field :nickname
  field :first_name
  field :last_name</p>

<p>references_many :activity_items
end
```</p>

<p>Users are an active bunch, so let's keep track of their activity. The user model references the activity items.</p>

<p>```ruby
class ActivityItem
  include Mongoid::Document
  include Mongoid::Timestamps</p>

<p>attr_protected :_id</p>

<p>field :event_type</p>

<p>referenced_in :user</p>

<p>index :user
end
```</p>

<p>The activity item references a user.</p>

<p>Now, let me show you how this works.</p>

<p><code>ruby
dczarnecki-agora:project dczarnecki$ rails console
Loading development environment (Rails 3.0.0)
ruby-1.9.2-p0 &gt; user = Factory.create(:user)
=&gt; #
ruby-1.9.2-p0 &gt; activity = Factory.create(:activity_item, :user =&gt; user)
=&gt; #
ruby-1.9.2-p0 &gt; user.activity_items.count
=&gt; 1
ruby-1.9.2-p0 &gt; activity.user
=&gt; #
ruby-1.9.2-p0 &gt;
</code></p>

<p>I created a user. I created an activity and associated it with the user I just created. I counted the number of activities of that user. I referenced the user from the activity.</p>

<p>Any questions?</p>
</div></div></div></section><aside id="sidebar"><div class="block" id="block-archive"><h2>Blog archives</h2><h3>2015</h3><ul><li><a href="/blog/2015/01/">January 2015</a></li></ul><h3>2014</h3><ul><li><a href="/blog/2014/12/">December 2014</a></li><li><a href="/blog/2014/11/">November 2014</a></li><li><a href="/blog/2014/10/">October 2014</a></li><li><a href="/blog/2014/08/">August 2014</a></li><li><a href="/blog/2014/07/">July 2014</a></li><li><a href="/blog/2014/06/">June 2014</a></li><li><a href="/blog/2014/04/">April 2014</a></li><li><a href="/blog/2014/03/">March 2014</a></li><li><a href="/blog/2014/02/">February 2014</a></li><li><a href="/blog/2014/01/">January 2014</a></li></ul><h3>2013</h3><ul><li><a href="/blog/2013/11/">November 2013</a></li><li><a href="/blog/2013/10/">October 2013</a></li><li><a href="/blog/2013/09/">September 2013</a></li><li><a href="/blog/2013/08/">August 2013</a></li><li><a href="/blog/2013/07/">July 2013</a></li><li><a href="/blog/2013/06/">June 2013</a></li><li><a href="/blog/2013/05/">May 2013</a></li><li><a href="/blog/2013/04/">April 2013</a></li><li><a href="/blog/2013/03/">March 2013</a></li><li><a href="/blog/2013/02/">February 2013</a></li><li><a href="/blog/2013/01/">January 2013</a></li></ul><h3>2012</h3><ul><li><a href="/blog/2012/12/">December 2012</a></li><li><a href="/blog/2012/11/">November 2012</a></li><li><a href="/blog/2012/10/">October 2012</a></li><li><a href="/blog/2012/09/">September 2012</a></li><li><a href="/blog/2012/08/">August 2012</a></li><li><a href="/blog/2012/07/">July 2012</a></li><li><a href="/blog/2012/06/">June 2012</a></li><li><a href="/blog/2012/05/">May 2012</a></li><li><a href="/blog/2012/04/">April 2012</a></li><li><a href="/blog/2012/03/">March 2012</a></li><li><a href="/blog/2012/02/">February 2012</a></li><li><a href="/blog/2012/01/">January 2012</a></li></ul><h3>2011</h3><ul><li><a href="/blog/2011/10/">October 2011</a></li><li><a href="/blog/2011/09/">September 2011</a></li><li><a href="/blog/2011/08/">August 2011</a></li><li><a href="/blog/2011/07/">July 2011</a></li><li><a href="/blog/2011/06/">June 2011</a></li><li><a href="/blog/2011/05/">May 2011</a></li><li><a href="/blog/2011/04/">April 2011</a></li><li><a href="/blog/2011/03/">March 2011</a></li><li><a href="/blog/2011/02/">February 2011</a></li><li><a href="/blog/2011/01/">January 2011</a></li></ul><h3>2010</h3><ul><li><a href="/blog/2010/12/">December 2010</a></li><li><a href="/blog/2010/11/">November 2010</a></li><li><a href="/blog/2010/10/">October 2010</a></li><li><a href="/blog/2010/09/">September 2010</a></li><li><a href="/blog/2010/08/">August 2010</a></li><li><a href="/blog/2010/07/">July 2010</a></li><li><a href="/blog/2010/06/">June 2010</a></li><li><a href="/blog/2010/05/">May 2010</a></li><li><a href="/blog/2010/04/">April 2010</a></li><li><a href="/blog/2010/03/">March 2010</a></li><li><a href="/blog/2010/02/">February 2010</a></li><li><a href="/blog/2010/01/">January 2010</a></li></ul><h3>2009</h3><ul><li><a href="/blog/2009/12/">December 2009</a></li><li><a href="/blog/2009/11/">November 2009</a></li><li><a href="/blog/2009/10/">October 2009</a></li><li><a href="/blog/2009/09/">September 2009</a></li><li><a href="/blog/2009/08/">August 2009</a></li><li><a href="/blog/2009/07/">July 2009</a></li><li><a href="/blog/2009/06/">June 2009</a></li><li><a href="/blog/2009/05/">May 2009</a></li><li><a href="/blog/2009/04/">April 2009</a></li><li><a href="/blog/2009/03/">March 2009</a></li><li><a href="/blog/2009/02/">February 2009</a></li><li><a href="/blog/2009/01/">January 2009</a></li></ul><h3>2008</h3><ul><li><a href="/blog/2008/11/">November 2008</a></li><li><a href="/blog/2008/10/">October 2008</a></li><li><a href="/blog/2008/09/">September 2008</a></li><li><a href="/blog/2008/08/">August 2008</a></li></ul></div></aside></article></div></div></div><footer><div class="outer-wrap"><div class="wrap"><div id="copyright"><img alt="Agora Games" src="/assets/images/agora-logo-agga-5548a56c.png"> <a href="http://majorleaguegaming.com/" target="_blank"><img alt="Major League Gaming" src="/assets/images/mlg-logo-white-86eb4b68.png"></a><a href="mailto:info@agoragames.com" id="email-us">Email Us</a><p>359 Broadway, Third Floor, Troy, NY 12180</p><p class="dim">&copy; 2013 Agora Games. All Rights Reserved.</p></div></div></div></footer><div class="hide"><iframe id="wufoo-iframe" src="javascript:void(0)"></iframe><a id="wufoo-thanks" href="/thanks/"></a></div><!--[if lt IE 9]>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<!--<![endif]-->
<script>
  if (!window.jQuery) {
    document.write('<script type="text/javascript" src="/assets/javascripts/vendor/jquery.min-199fc76d.js"><' + '/script>');
  }
</script>
<script src="/assets/javascripts/all-2f5d049e.js" type="text/javascript"></script></body></html>