<!DOCTYPE html> <html class=no-js lang=en> <head> <meta charset=utf-8> <meta content='width=device-width, initial-scale=1.0' name=viewport> <meta content='IE=edge,chrome=1' http-equiv=X-UA-Compatible> <title>Brain Matters</title> <link href="/assets/stylesheets/app-d7ac800e.css" rel=stylesheet /> <script src="/assets/javascripts/modernizr-84a49412.js"></script> <link href='/assets/images/favicon.ico' rel='shortcut icon'> </head> <body class='blog blog_2009 blog_2009_page blog_2009_page_3 blog_2009_page_3_index f-topbar-fixed'> <div class='fixed raised'> <nav class=top-bar data-topbar role=navigation> <ul class=title-area> <li class=name> <h1> <a href='/'> <img alt="Agora Games" class=main-logo src="/assets/images/agoragames-new-8534f601.svg"/> </a> </h1> </li> <li class='toggle-topbar menu-icon'> <a href='javascript:void(0)'> <span>Menu</span> </a> </li> </ul> <section class=top-bar-section> <ul class=right> <li> <a data-anchor href='/#about'>About</a> </li> <li> <a data-anchor href='/#team'>Team</a> </li> <li> <a data-anchor href='/#contact'>Contact</a> </li> <li> <a href='/blog'>Blog</a> </li> <li class=hydra-theme> <a href='http://hydra.agoragames.com'> <img alt=Hydra width=92 src="/assets/images/hydra-wordmark-6248cf07.svg"/> </a> </li> </ul> </section> </nav> </div> <div class=row> <div class=columns> <h1 class=blog-page-title> <a href="/blog">The <strong>Blog</strong> </a></h1> </div> </div> <div class=row> <div class='columns large-9'> <div class=blog-page-subtitle> <h2>Posts from 2009 </h2> </div> <div class=blog-entry-list><div class=blog-entry> <div class=blog__date> Mar 22 </div> <div class=blog__contents> <h2 class=blog__title> <a href="/blog/2009/03/22/suh-weet/">Suh-weet</a> </h2> <div class=blog__author> By <strong>David Czarnecki</strong> </div> <div class=blog__body> <p>One of our engineers has been doing some work with RRDTool (Round Robin Database); and more specifically PYRRD.  He's using it to combine real time usage stats with a prediction algorithm so that we can pre-emptively allocate resources to different parts of the system.  Its real spiffy.</p> <p>His additions to the PYRRD library just got commited to the trunk build, and he's credited in the readme.</p> <p><a href="http://code.google.com/p/pyrrd/source/browse/trunk/ChangeLog">http://code.google.com/p/pyrrd/source/browse/trunk/ChangeLog</a> <a href="http://code.google.com/p/pyrrd/source/browse/trunk/README">http://code.google.com/p/pyrrd/source/browse/trunk/README</a></p> </div> </div> </div> <div class=blog-entry> <div class=blog__date> Mar 20 </div> <div class=blog__contents> <h2 class=blog__title> <a href="/blog/2009/03/20/webdav-nginx-play-nice/">Making WebDAV and NGINX Play Nice Together</a> </h2> <div class=blog__author> By <strong>Jason LaPorte</strong> </div> <div class=blog__body> <p>NGINX supports WebDAV, but its support is incomplete. Here's how we made a quick PHP hack to allow us to use WebDAV without having to proxy to another web server.</p> <p><a href="http://en.wikipedia.org/wiki/WebDAV">WebDAV</a> is a pretty awesome method of maintaining a shared data repository: it's simple, secure (or, at least, easily secured), and supported out of the box by just about everything across multiple platforms. The problem with it is that finding a decent WebDAV server is pretty hard: <a href="http://httpd.apache.org/">Apache</a> and <a href="http://www.lighttpd.net/">LightTPD</a> each provide WebDAV (to varying levels of support), but I had a very hard time finding other reputable-looking servers, and adding either of those two web servers into what is otherwise an <a href="http://nginx.net/">NGINX</a>-only web server architecture isn't very clean. (Personally, I hate maintaining Apache and LightTPD, as they are both CPU and memory hogs, Apache especially.)</p> <p>NGINX "supports" WebDAV by means of a module, but this support is incomplete: it only handles the WebDAV methods PUT, DELETE, MKCOL, COPY, and MOVE, and leaves the necessary OPTIONS and PROPFIND (and the optional LOCK, UNLOCK, and PROPPATCH) methods unimplemented. This basically translates to being able to read and write files on disk, but being unable to do an "ls" or "dir" to see what files are available. Obviously, this is insufficient, so I created some magic to allow us to use a WebDAV repository with a technology stack we already have in place (namely, NGINX and PHP FCGI).</p> <p>Looking around the internet for similar things, I find that <a href="http://notes.xiaoka.com/2008/04/13/git-repository-over-http-webdav-with-nginx/">we're not the only ones trying to do this,</a> and came across a <a href="http://plan9.aichi-u.ac.jp/netlib/webappls/webdav.cgi">Perl CGI script</a> that is/can be used in a similar fashion. Unfortunately, NGINX doesn't play very nice with CGI (as opposed to FCGI, which works great with it), and I felt like I needed some semblance of performance out of this script, so I wasn't going to fire up a Perl process for every request (which is how CGI works). Instead, I wrote up a similar script in PHP. (In case you're not familiar with how FCGI works, it instead runs a daemon, which simply returns a response to each given request without having to run new processes. This cuts out a lot of overhead and allows for much better performance.)</p> <p>The idea is this: we have NGINX put up it's WebDAV support, and for every method that NGINX doesn't know how to respond to, we proxy the request to a PHP script that can handle it on NGINX's behalf. Making a simple FCGI script in PHP is not especially complicated. The original skeleton of it looked like this:</p> <p>```php &lt;?php</p> <p>$request_method = $ENV_['REQUEST_METHOD']</p> <p>switch ($request_method) { case 'PROPFIND': # Code to handle PROPFIND goes here. break;</p> <p>case 'OPTIONS': # Code to handle OPTIONS goes here. break;</p> <p>default: header ('HTTP/1.1 400 Bad Request'); break; }</p> <p>?&gt; ```</p> <p>We are given the request method via an environment variable from NGINX. Depending on the method given, we have to handle it in its own special way. If we get a method we don't understand, we merely return an HTTP error. Simple!</p> <p>In fact, implementing the PROPFIND and OPTIONS methods wasn't especially difficult, aside from the fact that reading the <a href="http://www.ietf.org/rfc/rfc2518.txt">WebDAV RFC</a> is mind-numbingly tedious. (The OPTIONS method simply spits out a couple static headers, while PROPFIND returns an XML document of a directory listing. You can see my final implementation here. Be aware I didn't bother to fully support WebDAV: I merely implemented the simplest possible subset of the WebDAV functionality.)</p> <p>So, I hooked it up end to end. The NGINX configuration to do so looked something like this:</p> <p>``` server { server_name <hostname>; listen 80;</hostname></p> <p>root <document root="">;</document></p> <p>dav_methods PUT DELETE MKCOL COPY MOVE; dav_access group:rw all:r; create_full_put_path on;</p> <p>include /etc/nginx/fastcgi_params; fastcgi_param SCRIPT_FILENAME /var/www/webdav-extensions.php; fastcgi_param DEPTH $http_depth;</p> <p>location / { if ($request_method ~ ^(PROPFIND|OPTIONS)$) { fastcgi_pass localhost:9000; break; } } } ```</p> <p>The document root (and everything in it!) was chowned "www-data:www-data", which is the user that NGINX runs as. Make sure the directory <em>above</em> your document root is owned by root, so that people using WebDAV aren't allowed to mess with the document root itself.</p> <p>You will note that we're running a PHP FCGI process (which we spawn with the LightTPD-supplied "spawn-fcgi" program) on localhost, on port 9000. Make sure you firewall whatever port you run your FCGI process on, or else you'll have a great, big security hole in your network.</p> <p>Also bear in mind that you can't use a vanilla Debian NGINX (or, whatever UNIX flavor you prefer), as it doesn't support WebDAV out-of-the-box. You will need to custom compile it with the "–with-http_dav_module" flag passed to "./configure". It's not complicated, but compiling NGINX is beyond the scope of this article.</p> <p>I tested it with a <a href="http://www.webdav.org/cadaver/">UNIX client I had handy</a>, and things worked pretty well. I could look around the directories, put and retrieve files, move things around, etc. Success!</p> <p>…well, not quite. I then tried firing up a Windows client. I could put and get files just fine, but it would error out when I tried to do anything relating to directories. Spending an hour or so poking around in the NGINX access logs and the NGINX WebDAV module's source code and I came to realize that the Windows WebDAV client didn't follow the HTTP spec: when specifying a directory in HTTP, you must follow it with a slash (e.g. "http://example.com/directory/", and not "http://example.com/directory"). Web browsers automatically account for these errors, which is why we never think about this sort of thing. However, NGINX's WebDAV support requires the HTTP-compliant behavior (trailing slashes and all), and thus rejects the request. This is mostly easy to fix in NGINX:</p> <p>``` server { # …</p> <p>location / { # …</p> <p>if (-d $request_filename) { rewrite ^(.<em>[^/])$ $1/ break; } if ($request_method = MKCOL) { rewrite ^(.</em>[^/])$ $1/ break; } } } ```</p> <p>This says that if the file exists and is a directory, add a trailing slash to the request if it doesn't already exist. We do similarly for MKCOL (that is, create directory) requests, since we can't check for the directory (since we havn't created it yet!).</p> <p>This solved the problem of creating and deleting directories in Windows! But there was still another problem lurking beneath the surface: the COPY and MOVE methods. See, it was the same problem as above (a lack of a trailing slash), but the destination of the COPY or MOVE is specified in the HTTP "Destination" header. While we can retrieve headers in NGINX (since they are made available in variables, such as "$http_destination"), NGINX provides no way to modify them.</p> <p>I first attemped to mangle the headers in NGINX and use a proxy request to NGINX itself to solve this problem. Predictably, I was unable to do so, and even if I had succeeded, the fix would have been positively maddening. So, I took the easy way out and added support for the COPY and MOVE methods into my PHP script, leaving NGINX to handle only PUT, DELETE, and MKCOL (in addition to the raw GET, HEAD, etc. methods). Again, simple, but tedious. Once I implemented it and got it tested, though, it worked perfectly on all platforms I tested it on.</p> <p>Performance looks great, but that doesn't surprise me, considering that the IO-heavy methods (GET and PUT) are implemented in NGINX. The methods I support (OPTIONS, PROPFIND, COPY, and MOVE) are all very simple and transient, meaning that when we do have to drop to PHP, we don't have to do so for very long.</p> <p>The final NGINX setup (which included HTTP Basic Authentication and SSL, for security), looked like this:</p> <p>``` server { server_name <hostname>; listen 443;</hostname></p> <p>root <document root="">;</document></p> <p>ssl on; ssl_certificate <ssl certificate="">; ssl_certificate_key <ssl private="" key="">;</ssl></ssl></p> <p>auth_basic <authentication realm="">; auth_basic_user_file <password file="">;</password></authentication></p> <p>dav_methods PUT DELETE MKCOL; dav_access group:rw all:r; create_full_put_path on;</p> <p>autoindex on; autoindex_exact_size off;</p> <p># Variables necessary for proper execution of the PHP script used below. include /etc/nginx/fastcgi_params; fastcgi_param SCRIPT_FILENAME /var/www/webdav-extensions.php; fastcgi_param DEPTH $http_depth; fastcgi_param HOST $host; fastcgi_param DESTINATION $http_destination; fastcgi_param OVERWRITE $http_overwrite;</p> <p>location / { # NGINX WebDAV support is incomplete and somewhat too strict. We handle # a few WebDAV methods manually in a PHP script to fill out the cracks. if ($request_method ~ ^(PROPFIND|OPTIONS|COPY|MOVE)$) { fastcgi_pass localhost:9000; break; }</p> <p># NGINX WebDAV requires trailing slashes on directories, yet certain # common WebDAV clients don't support them. Do rewrites to fix it, if (-d $request_filename) { rewrite ^(.<em>[^/])$ $1/ break; } if ($request_method = MKCOL) { rewrite ^(.</em>[^/])$ $1/ break; } } } ```</p> <p>The final PHP script is <a href="http://files.agoragames.com/jason/webdav-extensions.php.txt">here</a>. (It's not 100% WebDAV complient. Or even close. But it seems to cover all the common cases, as we havn't had any trouble with it yet.)</p> <p>What's especially awesome is that, if you just want quick read-only access, you can hit the WebDAV URL in a web browser and surf around that way (thanks to the NGINX "autoindex" module). You can also mount this (in just about any OS, including the built-in Mac OS X, Windows, and Ubuntu clients) for drag-and-drop access to the share, just like it was a local disk.</p> <p>I have some vague notions to extend it to handle SVN and GIT (as we currently proxy to Apache for HTTP access to those). Seeing as how the logic is so simple, it would probably be trivial to patch the NGINX WebDAV module with these changes as well. Those are blog posts for another day, though.</p> </div> </div> </div> <div class=blog-entry> <div class=blog__date> Mar 9 </div> <div class=blog__contents> <h2 class=blog__title> <a href="/blog/2009/03/09/the-head-shaving-experience/">The Head Shaving Experience</a> </h2> <div class=blog__author> By <strong>David Czarnecki</strong> </div> <div class=blog__body> <p>One of our Producers here at Agora Games let co-workers shave his head! Here are a few pictures of the madness.  Check out that Pac-Man ghost! Arrows seemed to be the most popular of the art that was being shaved in on Friday, March 6th.</p> <p><img alt="" title="Steve &amp; CZ" width=720 height=540 src="/assets/images/uploads/2009/03/001-2bd736b9.jpg"/></p> <p><img alt="" title="Steve &amp; Ola" width=720 height=540 src="/assets/images/uploads/2009/03/002-aebb7fdc.jpg"/></p> <p><img alt="" title=Steve width=720 height=540 src="/assets/images/uploads/2009/03/003-4397c038.jpg"/></p> <p>Apparently the shaving of our producer's head made  <a href="http://multiplayerblog.mtv.com/2009/03/05/game-developer-twitter-report-shaved-heads-watchmen-more/">MTV Multiplayers Twitter Watch!</a></p> </div> </div> </div> <div class=blog-entry> <div class=blog__date> Mar 6 </div> <div class=blog__contents> <h2 class=blog__title> <a href="/blog/2009/03/06/agorailsconf/">(Ago(ra)ilsconf)</a> </h2> <div class=blog__author> By <strong>David Czarnecki</strong> </div> <div class=blog__body> <p>If you're going to be at <a href="http://en.oreilly.com/rails2009/">RailsConf 2009</a> this year, then you should attend our talks.</p> <p><a href="http://en.oreilly.com/rails2009/public/schedule/detail/7729">Guitar Hero®: Behind the Music</a></p> <p><a href="http://en.oreilly.com/rails2009/public/schedule/detail/7879">PWN Your Infrastructure: Behind Call of Duty: World at War</a></p> <p>You won't be disappointed!</p> <p>\m/</p> </div> </div> </div> <div class=blog-entry> <div class=blog__date> Feb 23 </div> <div class=blog__contents> <h2 class=blog__title> <a href="/blog/2009/02/23/python-is-mocking-me-a-ruby-programmers-adventures-with-pythonmox/">Python Is Mocking Me: A Ruby Programmer's Adventures With Python/Mox</a> </h2> <div class=blog__author> By <strong>Tim Jones</strong> </div> <div class=blog__body> <p><strong>Overview</strong></p> <p>Much of Agora's work over the last few years has been done in Ruby. Recently though, we're migrating major components to Python in order to enjoy the benefits of cross platform compatibility with Windows. The purpose of this post is to discuss testing in Python; specifically mocking.</p> <p>Coming from Ruby I've so far found the mocking frameworks in Python somewhat lacking. I haven't found a case where I've been unable to implement a particular test in Python but I've certainly found myself doing a lot more typing than I would in Ruby/Mocha. Perhaps this is just a sign that the Python libraries need further abstraction to provide higher-level interfaces. I think it also points to the fact that metaprogramming magic is much simpler in Ruby.</p> <p>A quick and dirty list of some available mocking frameworks can be found here ( <a href="http://pycheesecake.org/wiki/PythonTestingToolsTaxonomy#MockTestingTools">http://pycheesecake.org/wiki/PythonTestingToolsTaxonomy#MockTestingTools</a>). We chose Mox primarily because it presented most of the functionality we were used to with Mocha and the interface was concise (relatively speaking…).</p> <p><strong>The Basics</strong></p> <p>Mox uses a record/replay format for creating mocks. Mocks are initialized with the system in record mode. All method calls executed on the mocks are recorded in order to be played back later. This is similar to Mocha, although Mocha makes this less explicit and does not enforce order. For comparison:</p> <p>Ruby/Mocha:</p> <p>```ruby class Foo def do_something self.first_thing self.second_thing end end</p> <p>f = Foo.new f.expects(:second_thing).once f.expects(:first_thing).once</p> <p>f.do_something ```</p> <p>Python/Mox:</p> <p>```python class Foo(object): def do_something(self): self.first_thing() self.second_thing()</p> <p>self.mox = mox.Mox() f = self.mox.CreateMock(Foo)</p> <p>f.first_thing() f.second_thing() self.mox.ReplayAll()</p> <p>f.do_something() self.mox.VerifyAll() ```</p> <p>Note, these are not complete examples and they will not run by themselves. We'll get to that in a bit. The important thing is that, in the Python/Mox version, we're doing a bit of recording until we get to ReplayAll(). At that point we stop recording and start executing the methods that will cause the recorded portion to be repeated by our running code. Mox checks off each method as it's called and raises exceptions if a call is not expected.</p> <p><strong>The Complete Example</strong></p> <p>Mox provides a handy subclass of unittest.TestCase that takes care of a few things for you. First, self.mox is instantiated in setUp method so you don't have to worry about doing that yourself. Second, and this is left out of the example above, it introduces some metaclass magic that unsets stubs and executes VerifyAll() to confirm that all expectations were met during execution (see the Mox documentation for an explanation of unsetting stubs). The complete code would look something like this:</p> <p>```python import mox from foo import Foo</p> <p>class FooTest(mox.MoxTestBase): def test_do_something(self): f = self.mox.CreateMock(Foo)</p> <pre><code>f.first_thing()
f.second_thing()
self.mox.ReplayAll()

f.do_something() ```
</code></pre> <p>If you want to mock an entire object this is great. It's relatively clean and gets the job done. But what if I want to stub out a single method of an already instantiated object? Enter StubOutWithMock.</p> <p>```python class FooTest(mox.MoxTestBase): def test_do_something(self): f = Foo() self.mox.StubOutWithMock(f, 'second_thing')</p> <pre><code>f.second_thing()
self.mox.ReplayAll()

f.do_something() ```
</code></pre> <p>In this example I've instantiated my own instance of Foo and allowed the first_thing method to get called normally. The second_thing method is mocked out. I could add return values and whatnot to the mock here if necessary.</p> <p>These are just two simple examples but they'll cover a lot of cases. Mox really handles them quite well. Where I think it starts to fall behind Mocha is when it comes to dealing with more complex tasks such as introducing mocks for locally instantiated objects. Ultimately I think the Mox library just needs a bit more abstraction to handle these cases.</p> <p><strong>The Hard(er) Stuff</strong></p> <p>Some folks <a href="(http://googletesting.blogspot.com/2008/08/by-miko-hevery-so-you-decided-to.html)">(http://googletesting.blogspot.com/2008/08/by-miko-hevery-so-you-decided-to.html</a> are of the opinion that your code should be written with testing in mind. I couldn't disagree more (although I think there are many good points that can be taken from that article for reasons outside of testing). I should <em>not</em> have to change the way I write code to make up for flaws in my testing framework. In some languages it may not be possible to support every test case without some extra consideration (compiled, strongly-typed, minimal-reflection languages come to mind although I've had excellent luck with MockItNow ( <a href="http://code.google.com/p/mockitnow/">http://code.google.com/p/mockitnow/</a>) for C++ under Visual Studio) but we're working with highly abstracted scripting languages here! There really shouldn't be a reason to change the way you code just to support testing. Let's see what we can do.</p> <p><strong>Local Object Construction</strong></p> <p>Note: Since this post was original written I've been shown a much more elegant way to mock local object construction. See comment #6 for details.</p> <p>In the everything's-an-object land of Python and Ruby objects are instantiated left and right. Most are created in local scopes. What happens when you want to mock out methods of an object that's instantiated inside of a function? Take the following code:</p> <p><code>python class Bar(object): def do_something(self, something): o = SomeOtherClass() result = o.crazy_thing_not_to_be_tested(something) return self.do_something_else(result) </code></p> <p>In our unit test what we really want to do is make sure that the result of crazy_thing_not_to_be_tested is being passed to do_something_else. Since the implementation of crazy_thing_not_to_be_tested is crazy (and because this is a unit test, not a functional one) we want to mock it out and return something simple. With Mocha I could use SomeOtherClass.any_instance but there's no such abstraction in Mox. An alternative might be to change our implementation so that the SomeOtherClass instance is passed to our method instead of being instantiated by it. In some cases this may work but what if the SomeOtherClass object needs to be initialized with private members of Bar? Furthermore this means you're writing your code for your tests and not vice versa (there are other reasons, unrelated to testing, for why you might be better off passing in the object rather than instantiating it locally but that's outside the scope of this post). It turns out that the Python solution is to mock out the class method that actually instantiates the object.</p> <p>Object allocation in Python is a two step process. First the instance is allocated and then the constructor (<strong>init</strong>) is called. This is similar to Ruby's allocate/initialize setup. The allocate equivalent for Python is <strong>new</strong>. This method can be mocked like any other.</p> <p>```python bar = Bar() self.mox.StubOutWithMock(bar, 'do_something_else') self.mox.StubOutWithMock(SomeOtherClass, '<strong>new</strong>')</p> <p>mocked_some_other_class = self.mox.CreateMockAnything() SomeOtherClass.<strong>new</strong>(SomeOtherClass, ).AndReturn(mocked_some_other_class) mocked_some_other_class.crazy_thing_not_to_be_tested('something').AndReturn('something_else') mocked_bar.do_something_else('something_else') self.mox.ReplayAll()</p> <p>mocked_bar.do_something_else('something') ```</p> <p><strong>Skipping Constructors</strong></p> <p>With our new knowledge of <strong>new</strong> it becomes easier to take care of a few more problems. Say your constructor does something that you really don't want to have executed for every test. There's a good argument here that you shouldn't be doing real work in your constructor anyway but in some cases it is desirable. At any rate, one solution is to instantiate the object using <strong>new</strong> without calling <strong>init</strong>. This could be done in your setUp method so that you have the object available for every test in your test case.</p> <p>```python class SomethingTest(mox.MoxTestBase): def setUp(self): mox.MoxTestBase.setUp(self)</p> <pre><code>self.something = Something.__new__(Something) ```
</code></pre> <p>Note that the <strong>new</strong> method takes the class object as its first argument. You may need to pass in additional arguments for <strong>init</strong> (although it's never called) to match the function definition.</p> <p>Later, if you actually want the constructor to be called, you can do so explicitly.</p> <p><code>python def a_test(self): self.something.__init__(*args) </code></p> <p><strong>Mocking Modules</strong></p> <p>Modules are nothing special, including those that are part of standard libraries. Mock away!</p> <p>```python import os</p> <p>self.mox.StubOutWithMock(os, 'listdir') os.listdir(".").AndReturn(["a_dir", "a_link", "cat.py", "dog.py", "goat.txt", ".svn"]) ```</p> <p><strong>Mocking Builtin Methods</strong></p> <p>The route to mocking builtin methods is a bit more involved but not terribly so. The first question is how to access the methods to mock them. StubOutWithMock takes an object and the name of the method to mock. We know the name of the method but what's the object? For those with Python experience it will seem obvious that the answer is the <strong>builtin</strong> module which houses all of Python's builtin methods. The way I found to access that module was via sys.modules:</p> <p>```python import sys</p> <p>self.mox.StubOutWithMock(sys.modules['<strong>builtin</strong>'], 'open')</p> <p>stream = self.mox.CreateMockAnything() sys.modules['<strong>builtin</strong>'].open('foo.yml', 'r').AndReturn(stream) ```</p> <p><strong>Mocking Your Parents</strong></p> <p>Sometimes its necessary to prevent the super class implementation of a method from being called during a test. This is actually very easy to accomplish and the implementation is relatively intuitive.</p> <p>To call a parent class implementation in Python you'd do something like this:</p> <p><code>python class HouseCat(Feline): def walk(self): self.act_crazy() Feline.walk(self) </code></p> <p>All we're doing is passing self directly to the Feline implementation of the walk method. So, all we need to do to mock out the Feline version is:</p> <p>```python self.mox.StubOutWithMock(Feline, 'walk')</p> <p>cat = HouseCat() Feline.walk(cat) self.mox.ReplayAll()</p> <p>cat.walk() ```</p> <p>Now self.act_crazy will be executed but the super class implementation of walk will be mocked out.</p> <p><strong>Sorting Out Errors With MockAnything</strong></p> <p>There's a bug of sorts when using the MockAnything class that causes fun problems ( <a href="http://code.google.com/p/pymox/issues/detail?id=3">http://code.google.com/p/pymox/issues/detail?id=3</a>) when Mox attempts to print out results of a failed method call. The output from Mox usually consists of a series of "Expected X. Got Y" statements. Well when X or Y includes a MockAnything object we run into a bit of a catch 22. Python attempts to convert the instance to a string using <strong>repr</strong> but, since we're mocking anything, we don't have a real implementation for that method and the object raises an exception to say that the method call for <strong>repr</strong> was unexpected. Currently the authors of Mox have not submitted a solution to this problem but there's a relatively naive one you can use yourself… Just implement the <strong>repr</strong> method explicitly for MockAnything objects. Be aware that this will likely (I haven't tried it) block attempts to mock the <strong>repr</strong> method itself and may cause unexpected issues later on.</p> <p>In the class definition for MockAnything (roughly ln 265 in mox.py) add the following:</p> <p>```python def <strong>str</strong>(self): return ""</p> <pre><code>def __repr__(self):
  return self.__str__()   ```
</code></pre> <p>MockAnything instances will then be rendered as in your error output.</p> <p><strong>Misc Trivia/Pointers/Gotchas</strong></p> <ul> <li>Everything is an object in Python so there's probably some way to mock everything</li> <li>Use mox.MoxTestBase as the parent class for all your tests where mocking will be used</li> <li>If you do this and you have your own setUp method declaration be sure to call the parent class implementation!</li> <li>Don't forget to call self.mox.ReplayAll() before you actually kick off the replay portion of your test</li> </ul> </div> </div> </div> <div class=blog-entry> <div class=blog__date> Feb 23 </div> <div class=blog__contents> <h2 class=blog__title> <a href="/blog/2009/02/23/automagically-managing-merges-with-svn/">Automagically Managing Merges with SVN</a> </h2> <div class=blog__author> By <strong>Ola Mork</strong> </div> <div class=blog__body> <p>For each Guitar Hero game we have a full trunk/branches/tags structure. Most of the trunks are copied off of their predecessor's trunk. This works pretty well for us, but it can be hairy to merge changes made to the original ( <code>game-1</code> ) trunk down to each of its descendants. I found that I was often forgetting to merge to *all* of the relevant branches. To mitigate the effects of my amnesia I wrote this, <code>chmod +x</code> 'd it and dropped it into my <code>~/bin</code> (which happens to be in my <code>PATH</code> ):</p> <p>```ruby #! /usr/bin/env ruby repository_host = 'your.svn.repository.host' working_dirs = ['~/Documents/game-2/trunk', '~/Documents/game-3/trunk', '~/Documents/game-4/trunk']</p> <p>p "usage: $ gh-merge revision [revision revision revision …]" if ARGV.empty?</p> <p>ARGV.each do |revision| working_dirs.each do |working_dir| p "merging #{working_dir}, revision #{revision}" <code>svn merge -c #{revision} \ svn+ssh://#{repository_host}/agora/game-1/trunk \ #{working_dir}</code> end end</p> <p>working_dirs.each do |working_dir| p "committing #{working_dir}" <code>svn ci -m "svn merge -c #{ARGV.join(', ')} \ svn+ssh://#{repository_host}/agora/game-1/trunk" \ #{working_dir}</code> end ```</p> <p>The <code>working_dirs</code> represent the paths to my working dirs for each branch I want to merge my trunk changes to.</p> <p>To use I just pass the revisions I want to push to each branch like so:</p> <p><code> ola$ gh-merge 31774 31775 31780 </code></p> <p>and it merges and commits those revisions to each branch. It assumes you're caching your authentication for svn.</p> </div> </div> </div> <div class=blog-entry> <div class=blog__date> Feb 23 </div> <div class=blog__contents> <h2 class=blog__title> <a href="/blog/2009/02/23/automatic-deploy-notifications/">Automatic Deploy Notifications</a> </h2> <div class=blog__author> By <strong>Ola Mork</strong> </div> <div class=blog__body> <p>When we make a deploy to our staging or production environments there are about 5 people who <strong>need</strong> to know and about 25 who <strong>want</strong> to know. Often someone is forgotten or the email doesn't go out at all and we get a phone call (which no one likes).</p> <p>The solution? Capistrano recipes to the rescue!</p> <p><code>ruby before 'deploy', 'deploy:notify' </code></p> <p>No matter what happens, if we're deploying people are going to know about it.</p> <p>Here's that task:</p> <p>```ruby namespace :deploy do desc "sends a notification email letting everyone know we're deploying" task :notify do deployment_name = application.to_s.gsub(/(-.*)?/, '').upcase stage_name = stage.to_s.upcase action_mailer_with_temporary_delivery_method do mail = TMail::Mail.new mail.subject = "Super Fantastic Project Pending Deploy [#{deployment_name} #{stage}]" mail.to = "superproject-deploy@lists.yourcompany.com" mail.from = ActionMailer::Base.smtp_settings[:user_name] mail.date = Time.now mail.body = ActionMailer::Utils.normalize_new_lines(%Q( Hello everyone,</p> <p>We're making a deploy to the #{stage} environment. The #{stage} site may (or may not) be unavailable for a few minutes sometime within the next 30 minutes (depending on how long it takes to upload the changes).</p> <p>This message is automated.</p> <p>———————- debugging information ———————- #{variables} )) ActionMailer::Base.deliver(mail) # puts mail.body end end end ```</p> <p>Now, what's going on here? First, apologies to DHH but I'm not smart enough to figure out how to make the Rails email system work so we just use TMail directly. Which is fine, but we use ARMailer which puts all of our email in a queue and it gets delivered by a cron job every 5 minutes or so. This usually works pretty well but in this case we have two problems though. The first is this is run on the deployer's machine, which may not have access to the database where it needs to queue up the email. Plus, when we deploy we disable the crons and we don't turn them back on until we're satisfied everything is working. If we used ARMailer for this particular email, the site may be down and no one would know; defeats the purpose of the notification.</p> <p>action_mailer_with_temporary_delivery_method addresses this problem:</p> <p><code>ruby def action_mailer_with_temporary_delivery_method existing_delivery_method = ActionMailer::Base.delivery_method existing_smtp_settings = ActionMailer::Base.smtp_settings begin ActionMailer::Base.delivery_method = :smtp ActionMailer::Base.smtp_settings = { :address =&gt; "smtp.gmail.com", :port =&gt; "587", :domain =&gt; "your.domain.com", :authentication =&gt; :plain, :user_name =&gt; "do-not-reply@your.domain.com", :password =&gt; "PASSword" } yield ensure ActionMailer::Base.delivery_method = existing_delivery_method ActionMailer::Base.smtp_settings = existing_smtp_settings end end </code></p> <p><code>action_mailer_with_temporary_delivery_method</code> temporarily sets up ActionMailer to use SMTP (with gmail) to send out our notification. When we're done, it sets it back to whatever it was set to before.</p> <p>We've hurdled the actual message delivery, but how can we make that notification message itself more useful to the internal group? We do two things. The first is to sort out exactly what we're deploying and where we're deploying it to:</p> <p><code>ruby deployment_name = application.to_s.gsub(/(-.*)?/, '').upcase stage_name = stage.to_s.upcase </code></p> <p>application and stage are set in our regular deploy script with:</p> <p><code>ruby set :application, 'superproject-staging' </code></p> <p><code>:stage</code> is more complicated but essentially the same (in this example it would be 'staging')</p> <p>The second pieces is <code>variables</code> . Capistrano 2.3 has an instance variable available to all tasks named <code>@variables</code> . We were just inspecting that for a while but it has a lot of procs for determining some of the values. Now we do this:</p> <p><code>ruby def variables result = [] @variables.reject { |k,v| k.to_s.downcase.eql?('password') }.each_pair do |key, value| # since we're going to be printing this out, we don't want to see garbage like # "#" value = value.is_a?(Proc) ? value.call : value value = value.is_a?(Array) ? value.join(", ") : value result </code></p> <p>Which gives you some better output:</p> <p><code> ---------------------- debugging information ---------------------- application : superproject-staging available_stages : staging, production, qa cron_file : config/cron/staging_cron.conf cron_role : utility cron_role_only_clause : current_dir : current current_path : /home/www-data/superproject-staging/current current_release : /home/www-data/superproject-staging/releases/20090220155729 current_revision : 32024 default_environment : default_run_options : ptytrue deploy_to : /home/www-data/superproject-staging deploy_via : checkout keep_releases : 7 latest_release : /home/www-data/superproject-staging/releases/20090220162352 latest_revision : 32024 logger : #&lt;Capistrano::Logger:0x1214e30&gt; memcache_extra_options : memcache_memory : 64 memcache_pid_file : /home/www-data/superproject-staging/shared/log/memcache.pid memcache_port : 20109 memcache_role : app memcache_user : root migrate_plugin_role : db migrate_plugin_role_only_clause : primarytrue mongrel_address : 0.0.0.0 mongrel_environment : staging mongrel_instances : 8 . . . . etc </code></p> <p>Prettier examples are available at <a href="http://pastie.org/395233">pastie</a>. Drop that in <code>config/recipes/notification.rb</code> and in your normal <code>config/deploy.rb</code> include this:</p> <p><code> load 'config/recipes/notification </code></p> </div> </div> </div> <div class=blog-entry> <div class=blog__date> Feb 23 </div> <div class=blog__contents> <h2 class=blog__title> <a href="/blog/2009/02/23/agora-in-print/">Agora in print</a> </h2> <div class=blog__author> By <strong>Brian Corrigan</strong> </div> <div class=blog__body> <p>Our CTO Brian Corrigan was quoted in an article in this month's ComputerWorld magazine. Check it out <a href="http://www.computerworld.com/action/article.do?command=viewArticleBasic&amp;taxonomyName=Default&amp;articleId=333530&amp;taxonomyId=0&amp;pageNumber=2">here</a>!</p> </div> </div> </div> <div class=blog-entry> <div class=blog__date> Jan 12 </div> <div class=blog__contents> <h2 class=blog__title> <a href="/blog/2009/01/12/porting-legacy-applications-to-modern-systems/">Porting Legacy Applications to Modern Systems</a> </h2> <div class=blog__author> By <strong>Jason LaPorte</strong> </div> <div class=blog__body> <p><em>(Or, an adventure in pain!)</em></p> <p>Let me preface this little article by saying I did <strong>not</strong> write the app I am now porting to our new network. I know noting about its specific intricacies, and furthermore, I know nothing specifically about gettext, file_column, or attachment_fu. So, I dove into this project with a sort of wanton abandon that is fairly characteristic of much of the work I do. Any obviously stupid mistakes below thus really happened.</p> <p>Let me also preface this with the fact that this Rails app is old. Version 1.2.3 old. So, as always, YMMV.</p> <p>Finally, I really wish attachment_fu had proper documentation. ## Installing GetText 1.10.0 We don't really like GetText around here, but, at the time, it was the only option. Getting it running off of a local copy (so I wouldn't have to pollute other projects with it) was less difficult than I expected. Go to your vendor/gems directory and issue: gem unpack gettext This assumes you have gettext 1.10.0 installed locally. I think adding a VERSION=1.10.0 will handle it if you have multiple gettext versions laying around. After that, I merely needed to add the following to config/environment.rb to make sure the gem loaded: GETTEXT_GEM_DIR = "#{File.expand_path(RAILS_ROOT)}/vendor/gems/gettext-1.10.0" $LOAD_PATH.reject { |path| path =~ /gettext/ } $LOAD_PATH « GETTEXT_GEM_DIR $LOAD_PATH « File.join(GETTEXT_GEM_DIR, 'lib') $LOAD_PATH « File.join(GETTEXT_GEM_DIR, 'ext', 'gettext') require File.join(GETTEXT_GEM_DIR, 'lib', 'gettext.rb') Ta-da! ## Replacing File_Column With Attachment_Fu After doing the above and booting up a test server, I get the following fun error: no such file to load – RMagick There is no way I am ever installing RMagick onto our nice, new, beautiful infrastructure. I want things done right, here. I also don't want to have to be paranoid about memory leaks, especially for legacy applications. So, we have to get rid of it.</p> <p>This problem is caused by our use of file_column, an old-but-effective way of easily adding file uploading support into a Rails app. The modern <em>de facto</em> standard for this seems to be attachment_fu, which uses the much-better-designed ImageScience instead of RMagick.</p> <p>So, let's gut this fish. ### Remove File_Column.</p> <p>$ svn rm vendor/plugins/file_column ### Install ImageScience.</p> <p>$ sudo apt-get -y install libfreeimage3 libfreeimage-dev $ sudo gem install image_science ### Install Attachment_Fu.</p> <p>$ script/plugin install http://svn.techno-weenie.net/projects/plugins/attachment_fu/ After installing attachment_fu, I powered back up script/server to check the next fun error: undefined method `file_column' for Clan:Class This is expected: file_column is gone, so the app can't possibly know what a file_column is. Now, we have to get into the nitty-gritty of tweaking the app. ### Adapting the Application to Attachment_Fu. Let's start in app/models/clan.rb, to which I was directed by the aforementioned error: $ grep file_column app/models/clan.rb No output. The words file_column don't appear in that class. Not what I expected.</p> <p>In the time-honored tradition of killing a cockroach with a shotgun, I then turned my sights on the entire app directory: $ grep -R file_column app The only results that turn up happen to be in app/views, leaving me perplexed. A quick conversation with the project lead informs me that this application uses "skeletons", or appable_plugins, which was an absolutely horrible idea that we thankfully no longer use. In essence, it allows you to wrap pieces of functionality into a self-contained plugin, which is duck-punched onto your application when it starts. It is great from a code-reuse perspective, but horrible from a KISS and maintenance standpoint, which is why we no longer use it.</p> <p>Except that every now and again, it comes back to bite you in the ass when you least expect it.</p> <p>Anyway, checking the skeletons quickly turns up what I am looking for: $ grep -R file_column vendor/skeletons/clan_skeleton vendor/skeletons/clan_skeleton/app/models/clan.rb: file_column :avatar_image, :magick =&gt; { :size =&gt; "64x64!"} So, there is where I have to make the first incision. I changed it as follows: # file_column :avatar_image, :magick =&gt; { :size =&gt; "64x64!"} # validates_filesize_of :avatar_image, :in =&gt; 0..40.kilobytes</p> <p>has_attachment :content_type =&gt; :image, :storage =&gt; :file_system, :max_size =&gt; 40.kilobytes, :resize_to =&gt; '64x64!'</p> <p>validates_as_attachment Time to restart the server and try again. (I don't honestly expect it to work: there are (at least!) a lot of views that use file_column methods. It is easiest to just hack at them one at a time until everything works, though!)</p> <p>I spent the next couple hours digging through the innards of attachment_fu, only to discover that I had written :filesystem, above, instead of :file_system (note the underscore). Make sure you spell things correctly, people, or you'll be in for a world of self-induced hurt. (The above snippet shows things the correct way, so you, my beloved internet, won't inadvertently copy-and-paste yourself into hell.)</p> <p>Once I had properly spelled everything, though, I met with success: the front page of the site loaded! Clicking on just about anything yielded a failure, as anticipated: undefined method `url_for_file_column' for #&lt;#<class:0x7f7d7f3006c0>:0x7f7d7f300670&gt; The views didn't work, but the fix wasn't horrible. Generally speaking, I simply searched and replaced the following: url_for_file_column(X, 'avatar_image') with: X.public_filename Also, along with this, I modified the clan table's SQL schema to accomodate attachment_fu: ALTER TABLE clans CHANGE avatar_image filename VARCHAR(255) DEFAULT NULL; ALTER TABLE clans ADD (content_type VARCHAR(255) DEFAULT NULL, size INT DEFAULT NULL, width INT DEFAULT NULL, height INT DEFAULT NULL); Thankfully, this was pretty easy to do, since the clans table was very small for this particular title. If it were larger, I would create a separate table and do a SELECT \* FROM clans INSERT INTO clans_temp sort of thing. (Yes, I know that it is very evil to hack the SQL directly instead of using migrations. This app is sufficiently old that I cannot guarantee that its migrations even work; I'm already spending a lot of time trying to port this app, I don't want to spend much more trying to make it perfect. If it weren't a legacy application, however, I would do things a bit more cleanly.)</class:0x7f7d7f3006c0></p> <p>At this point, virtually everything on the site worked. Avatars (once moved to the proper new directories) showed up just fine. The only remaining error came from trying to upload a new avatar image. Solving this essentially boiled down to a complex series of hacks to blend attachment_fu into the remainder of the existing codebase; none of which were particularly complex or interesting (generally involving changing the names a form parameters from the previous :avatar_image to the new :uploaded_data, like this:) &lt;%#= file_column_field 'clan', 'avatar_image' %&gt; &lt;%= file_field_tag :uploaded_data %&gt; Doing all this left me with one final application error, received when actually performing the file upload: Content type is not included in the list content type can't be blank Validations are complaining. After tinkering with attachment_fu's code for a while, I discover that there is a method that attachment_fu adds to your ActiveRecords (uploaded_data=), which sets content_type and other miscellaneous variables. And, clearly, this wasn't getting called.</p> <p>Turns out I was getting bitten by multipart forms. By tossing a quick puts params.inspect into the code, I quickly saw where my problem lay. Notice the following bit from our clans controller's update method: @clan.update_attributes(params[:clan]) Unfortunately for me, the uploaded data is in params[:uploaded_data], and not in params[:clan][:uploaded_data]. While there's a cleaner fix, the following hack suits our purposes fine and allows me to finish up this 20-hour hackfest: params[:clan][:uploaded_data] = params[:uploaded_data] So, after all of this code mangling, we finally had our app ready to move to a new, lighter-weight infrastructure, ultimately saving us money. A very frustrating few days, but they will pay for themselves. All that remains is integrating into a new infrastructure, and switching over the DNS.</p> </div> </div> </div> <div class=blog-entry> <div class=blog__date> Jan 5 </div> <div class=blog__contents> <h2 class=blog__title> <a href="/blog/2009/01/05/the-misunderstood-art/">The Misunderstood Art</a> </h2> <div class=blog__author> By <strong>Christian Arca</strong> </div> <div class=blog__body> <p><img alt="" width=450 height=199 src="/assets/images/uploads/2009/01/blogimage-979e758b.jpg"/></p> <p>Note: This editorial does not express the feelings of Agora Games as a company, and is solely the opinion of the author.</p> <p>Art, by definition is the expression or application of human creative skill and imagination typically in a visual form. A video game by definition is a game played by electronically manipulating images produced by a computer program on a television screen or other display screen. By both definitions of each word, video games may be considered a form of art. The computer program which electronically manipulates images on a display screen must be created by a human. This human, must apply creative skill to create such images as well as the manipulation of images, images being a visual form. The definition of art clearly states that a the expression of human creativity is typically in a visual form, which video games by definition clearly do. Therefore, technically disregarding all personal opinions, culture, and other variable elements video games by definition are art. </p> <p>I strongly believe that video games are a form of art. Video games in fact include almost every single element of art there is. Let us analyze one of the most “accepted” forms of art in society which is included in video games, literature. Many video games these days staff writers to create a story for the particular game at hand. In fact, many game journalists include the quality of story within their review of a game. How much different is that then the <em>New York Times</em> reviewing a new novel? In fact, with games currently averaging about 20+ hours of gameplay it is safe to say that a well developed short story, or even a novel may be included within a video game. </p> <p>While one might argue that the quality of story is rather poor does this not also hold true to several novels? Sure one might say <em>Gears of War</em> had very poor dialogue and a rather poor story progression however, other titles provide players with a very well developed story and dialogue. An example of such a game in my opinion would be <em>Mass Effect,</em> in which a character Lorik Qui’in after you the player say, “I will let you go.” states the following, “Let me go? Do humans consider conversation a form of imprisonment? That would explain why so few of you are willing to sit down and talk…” This dialogue being directed at my character, therefore an extension of myself since I am controlling the character. The communication is not passive in nature, it is directed at myself and therefore directly impacts my thoughts and feelings on a personal level since it is I who am controlling this character, I who am a living breathing human being. The character being addressed is not print on a paper, it is my character, my choices which insinuated this response from Lorik. </p> <p>This method of immersion can not be achieved through a novel. Koster, touches on this subject by saying, “…games are very fundamental and powerful learning tools. It’s one thing to read in a book that “the map is not the territory” and another to have your armies rolled over by your opponent in a game. When the latter happens, you’re <em>gonna get the point</em> even if the actual armies aren’t marching into your suburban home.” Furthermore, video games are an accessible medium to any given audience. That is to say, while a certain skill is required to play a video game, both a novice gamer and an experience gamer will both be able to direct their in game experience into the subconscious, intuitive mind. However, in the art of literature, an experienced reader will gain a better experience into their subconscious, intuitive mind rather than a novice reader. </p> <p>Koster, in fact hits on this topic by comparing literature to games. “Consider the key differences between something like a book and different kinds of games. A book can do the logical conscious part of the brain pretty well. And really good readers have an ability to slurp that info directly into the subconscious, intuitive mind. But what a book will never be able to do is accelerate the grokking process to the degree that games do, because you cannot practice a pattern and run permutations on it with a book.” In essence, within a book you do not have the option to experience a scenario or event which you caused and observe the various outcomes of your actions. </p> <p>In addition to providing players with an immersive experience through literature, video games also provide creative visual elements which allow players to continue their immersion in a video game. Furthermore, combining both visual and literary elements provide the player with a unique experience which can not be simulated by any other form of art. Artists, art directors, and creative directors work in unison to give players a certain “feeling” or evoke a certain “emotion” while playing the game. </p> <p>The complexity and infancy of video games make the legitimacy of video games as a medium of art rather difficult to swallow. However, many other forms of art when first introduced went through the same life cycle. From the 1900s to the 1940s on screen films went from short black and white movies to full length hour long movies fully dressed with color and sound. As video games begin to mature and designers, programmers, artists, and musicians begin to become more experienced within this form of art I can only hope that the social stigma and media literacy problem evolves as well. One day I truly believe we will be walking through a museum watching interactive displays featuring some of the greatest forms of art, video games. </p> </div> </div> </div> </div> <div class=blog-pagination> <ul class=inline-list> <li>Page 3 of 3</li> <li> <a href="/blog/2009/page/2/">Newer entries » </a></li> </ul> </div> </div> <div class='columns large-3'> <div class=blog-archives-sidebar> <h2>Blog archives</h2> <h3> <a href="/blog/2015/">2015</a> </h3> <ul> <li> <a href="/blog/2015/03/">March 2015</a> </li> <li> <a href="/blog/2015/01/">January 2015</a> </li> </ul> <h3> <a href="/blog/2014/">2014</a> </h3> <ul> <li> <a href="/blog/2014/12/">December 2014</a> </li> <li> <a href="/blog/2014/11/">November 2014</a> </li> <li> <a href="/blog/2014/10/">October 2014</a> </li> <li> <a href="/blog/2014/08/">August 2014</a> </li> <li> <a href="/blog/2014/07/">July 2014</a> </li> <li> <a href="/blog/2014/06/">June 2014</a> </li> <li> <a href="/blog/2014/04/">April 2014</a> </li> <li> <a href="/blog/2014/03/">March 2014</a> </li> <li> <a href="/blog/2014/02/">February 2014</a> </li> <li> <a href="/blog/2014/01/">January 2014</a> </li> </ul> <h3> <a href="/blog/2013/">2013</a> </h3> <ul> <li> <a href="/blog/2013/11/">November 2013</a> </li> <li> <a href="/blog/2013/10/">October 2013</a> </li> <li> <a href="/blog/2013/09/">September 2013</a> </li> <li> <a href="/blog/2013/08/">August 2013</a> </li> <li> <a href="/blog/2013/07/">July 2013</a> </li> <li> <a href="/blog/2013/06/">June 2013</a> </li> <li> <a href="/blog/2013/05/">May 2013</a> </li> <li> <a href="/blog/2013/04/">April 2013</a> </li> <li> <a href="/blog/2013/03/">March 2013</a> </li> <li> <a href="/blog/2013/02/">February 2013</a> </li> <li> <a href="/blog/2013/01/">January 2013</a> </li> </ul> <h3> <a href="/blog/2012/">2012</a> </h3> <ul> <li> <a href="/blog/2012/12/">December 2012</a> </li> <li> <a href="/blog/2012/11/">November 2012</a> </li> <li> <a href="/blog/2012/10/">October 2012</a> </li> <li> <a href="/blog/2012/09/">September 2012</a> </li> <li> <a href="/blog/2012/08/">August 2012</a> </li> <li> <a href="/blog/2012/07/">July 2012</a> </li> <li> <a href="/blog/2012/06/">June 2012</a> </li> <li> <a href="/blog/2012/05/">May 2012</a> </li> <li> <a href="/blog/2012/04/">April 2012</a> </li> <li> <a href="/blog/2012/03/">March 2012</a> </li> <li> <a href="/blog/2012/02/">February 2012</a> </li> <li> <a href="/blog/2012/01/">January 2012</a> </li> </ul> <h3> <a href="/blog/2011/">2011</a> </h3> <ul> <li> <a href="/blog/2011/10/">October 2011</a> </li> <li> <a href="/blog/2011/09/">September 2011</a> </li> <li> <a href="/blog/2011/08/">August 2011</a> </li> <li> <a href="/blog/2011/07/">July 2011</a> </li> <li> <a href="/blog/2011/06/">June 2011</a> </li> <li> <a href="/blog/2011/05/">May 2011</a> </li> <li> <a href="/blog/2011/04/">April 2011</a> </li> <li> <a href="/blog/2011/03/">March 2011</a> </li> <li> <a href="/blog/2011/02/">February 2011</a> </li> <li> <a href="/blog/2011/01/">January 2011</a> </li> </ul> <h3> <a href="/blog/2010/">2010</a> </h3> <ul> <li> <a href="/blog/2010/12/">December 2010</a> </li> <li> <a href="/blog/2010/11/">November 2010</a> </li> <li> <a href="/blog/2010/10/">October 2010</a> </li> <li> <a href="/blog/2010/09/">September 2010</a> </li> <li> <a href="/blog/2010/08/">August 2010</a> </li> <li> <a href="/blog/2010/07/">July 2010</a> </li> <li> <a href="/blog/2010/06/">June 2010</a> </li> <li> <a href="/blog/2010/05/">May 2010</a> </li> <li> <a href="/blog/2010/04/">April 2010</a> </li> <li> <a href="/blog/2010/03/">March 2010</a> </li> <li> <a href="/blog/2010/02/">February 2010</a> </li> <li> <a href="/blog/2010/01/">January 2010</a> </li> </ul> <h3> <a href="/blog/2009/">2009</a> </h3> <ul> <li> <a href="/blog/2009/12/">December 2009</a> </li> <li> <a href="/blog/2009/11/">November 2009</a> </li> <li> <a href="/blog/2009/10/">October 2009</a> </li> <li> <a href="/blog/2009/09/">September 2009</a> </li> <li> <a href="/blog/2009/08/">August 2009</a> </li> <li> <a href="/blog/2009/07/">July 2009</a> </li> <li> <a href="/blog/2009/06/">June 2009</a> </li> <li> <a href="/blog/2009/05/">May 2009</a> </li> <li> <a href="/blog/2009/04/">April 2009</a> </li> <li> <a href="/blog/2009/03/">March 2009</a> </li> <li> <a href="/blog/2009/02/">February 2009</a> </li> <li> <a href="/blog/2009/01/">January 2009</a> </li> </ul> <h3> <a href="/blog/2008/">2008</a> </h3> <ul> <li> <a href="/blog/2008/11/">November 2008</a> </li> <li> <a href="/blog/2008/10/">October 2008</a> </li> <li> <a href="/blog/2008/09/">September 2008</a> </li> <li> <a href="/blog/2008/08/">August 2008</a> </li> </ul> </div> </div> </div> <script src="/assets/javascripts/app-8ee17240.js" async=true></script> </body> </html>