<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width" name="viewport"><title>Creating high score tables (leaderboards) using Redis</title><link href="/assets/images/favicon.ico" rel="shortcut icon"><link href="/assets/stylesheets/all-e84bb3ce.css" media="all" rel="stylesheet" type="text/css" /><!--[if lt IE 9]><script src="/assets/javascripts/vendor/html5shiv-8b3747c5.js" type="text/javascript"></script><![endif]--></head><body><div class="outer-wrap"><div class="inner-wrap"><div class="wrap"><header class="clearfix" id="page"><a href="/"><img alt="Agora Games" id="logo" src="/assets/images/agora-games-logo-e99b2824.png"></a><nav><ul><li><a href="https://hydra.agoragames.com/">Products</a></li><li><a href="/portfolio/">Customers</a></li><li><a href="/us/">Team</a></li><li><a href="/community/">Community</a></li><li><a href="/work-at-agora/">Jobs</a></li><li><a href="/blog/">Blog</a></li></ul></nav></header></div><div class="wrap"><article class="clearfix"><header><h1>The <strong>Blog</strong></h1></header><section id="blog-entry"><div class="blog-entry"><div class="date-comments"><div class="date">Jan 2</div></div><div class="blog-content"><h2>Creating high score tables (leaderboards) using Redis</h2><div class="blog-author">By <strong>David Czarnecki</strong></div><div class="blog-body"><p>To my other colleagues at Agora Games, I have one word: FIRST!</p>

<table>
  <tbody>
    <tr>
      <td>Now that I've got that out of my system, down to the business at hand. I've read a number of articles on <a href="http://redis.io/">Redis</a> that mention how it could be used for high score tables (leaderboards), but I didn't see any examples that would walk you through exactly how to do that. Time to rectify that since it's 2011 and we still don't have flying cars â€¦ so ,,</td>
      <td>, future.</td>
    </tr>
  </tbody>
</table>

<p><strong>UPDATE: Please use the <a href="../2011/01/01/creating-high-score-tables-leaderboards-using-redis/">original post for any comments/feedback</a>. This post is a placeholder.</strong></p>

<p><strong>UPDATE:</strong> All of this has been packaged up in the <a href="https://github.com/agoragames/leaderboard">leaderboard gem on GitHub</a>.</p>

<p>Leaderboards are a small, but important part of the engineering we do at Agora Games. As such, <a href="http://twitter.com/CzarneckiD/status/21081627241226241">when not riding the short bus</a>, I'm looking for ways to improve leaderboard generation for various situations. So, here's how I might approach creating leaderboards using Redis.</p>

<p>I offer the following gist. Here's the jist of the gist:</p>

<ul>
  <li>
    <p>The following was prototyped using the redis CLI. You can obviously port the logic to your favorite language binding for Redis, *cough* Ruby *cough*.</p>
  </li>
  <li>
    <p>You will be using the <a href="http://redis.io/commands#sorted_set">Sorted Set</a> commands in Redis.</p>
  </li>
  <li>
    <p>You will need to be running at least Redis 2.1.6 to use the ZREVRANGEBYSCORE method.</p>
  </li>
  <li>
    <p>Add players to the HIGHSCORES "table" using the ZADD method.</p>
  </li>
  <li>
    <p>Print out the players (with a given page size) from the HIGHSCORES "table" using the ZREVRANGEBYSCORE method to show scores from highest to lowest.</p>
  </li>
  <li>
    <p>There is some bookkeeping code that you would do at the application level in terms of tracking what page you are on, dividing the total # of leaderboard entries into pages for a given page size, etc.</p>
  </li>
  <li>
    <p>Create an "Around Me" leaderboard with scores of individuals above and below an individual player using a combination of the ZREVRANK and ZREVRANGEBYSCORE methods.</p>
  </li>
  <li>
    <p>Again, there is some bookkeeping code that you would do at the application level in terms of tracking how many players above or below to show and taking into account offsets.</p>
  </li>
  <li>
    <p>The data that you store for a given player could be richer than just the player name or player ID. This is probably a larger design consideration if you are considering the "Around Me" leaderboard situation.</p>
  </li>
</ul>

<p>{% gist 762065 %}</p>

<p><strong>UPDATE: 1/3/2011:</strong> I updated the gist to do the "Around Me" leaderboard in 2 calls.</p>

<p>You can find more hilarity over on my Twitter account, <a href="http://twitter.com/czarneckid">CzarneckiD</a>.</p>
</div></div></div></section><aside id="sidebar"><div class="block" id="block-archive"><h2>Blog archives</h2><h3>2013</h3><ul><li><a href="/blog/2013/11/">November 2013</a></li><li><a href="/blog/2013/10/">October 2013</a></li><li><a href="/blog/2013/09/">September 2013</a></li><li><a href="/blog/2013/08/">August 2013</a></li><li><a href="/blog/2013/07/">July 2013</a></li><li><a href="/blog/2013/06/">June 2013</a></li><li><a href="/blog/2013/05/">May 2013</a></li><li><a href="/blog/2013/04/">April 2013</a></li><li><a href="/blog/2013/03/">March 2013</a></li><li><a href="/blog/2013/02/">February 2013</a></li><li><a href="/blog/2013/01/">January 2013</a></li></ul><h3>2012</h3><ul><li><a href="/blog/2012/12/">December 2012</a></li><li><a href="/blog/2012/11/">November 2012</a></li><li><a href="/blog/2012/10/">October 2012</a></li><li><a href="/blog/2012/09/">September 2012</a></li><li><a href="/blog/2012/08/">August 2012</a></li><li><a href="/blog/2012/07/">July 2012</a></li><li><a href="/blog/2012/06/">June 2012</a></li><li><a href="/blog/2012/05/">May 2012</a></li><li><a href="/blog/2012/04/">April 2012</a></li><li><a href="/blog/2012/03/">March 2012</a></li><li><a href="/blog/2012/02/">February 2012</a></li><li><a href="/blog/2012/01/">January 2012</a></li></ul><h3>2011</h3><ul><li><a href="/blog/2011/10/">October 2011</a></li><li><a href="/blog/2011/09/">September 2011</a></li><li><a href="/blog/2011/08/">August 2011</a></li><li><a href="/blog/2011/07/">July 2011</a></li><li><a href="/blog/2011/06/">June 2011</a></li><li><a href="/blog/2011/05/">May 2011</a></li><li><a href="/blog/2011/04/">April 2011</a></li><li><a href="/blog/2011/03/">March 2011</a></li><li><a href="/blog/2011/02/">February 2011</a></li><li><a href="/blog/2011/01/">January 2011</a></li></ul><h3>2010</h3><ul><li><a href="/blog/2010/12/">December 2010</a></li><li><a href="/blog/2010/11/">November 2010</a></li><li><a href="/blog/2010/10/">October 2010</a></li><li><a href="/blog/2010/09/">September 2010</a></li><li><a href="/blog/2010/08/">August 2010</a></li><li><a href="/blog/2010/07/">July 2010</a></li><li><a href="/blog/2010/06/">June 2010</a></li><li><a href="/blog/2010/05/">May 2010</a></li><li><a href="/blog/2010/04/">April 2010</a></li><li><a href="/blog/2010/03/">March 2010</a></li><li><a href="/blog/2010/02/">February 2010</a></li><li><a href="/blog/2010/01/">January 2010</a></li></ul><h3>2009</h3><ul><li><a href="/blog/2009/12/">December 2009</a></li><li><a href="/blog/2009/11/">November 2009</a></li><li><a href="/blog/2009/10/">October 2009</a></li><li><a href="/blog/2009/09/">September 2009</a></li><li><a href="/blog/2009/08/">August 2009</a></li><li><a href="/blog/2009/07/">July 2009</a></li><li><a href="/blog/2009/06/">June 2009</a></li><li><a href="/blog/2009/05/">May 2009</a></li><li><a href="/blog/2009/04/">April 2009</a></li><li><a href="/blog/2009/03/">March 2009</a></li><li><a href="/blog/2009/02/">February 2009</a></li><li><a href="/blog/2009/01/">January 2009</a></li></ul><h3>2008</h3><ul><li><a href="/blog/2008/11/">November 2008</a></li><li><a href="/blog/2008/10/">October 2008</a></li><li><a href="/blog/2008/09/">September 2008</a></li><li><a href="/blog/2008/08/">August 2008</a></li></ul></div></aside></article></div></div></div><footer><div class="outer-wrap"><div class="wrap"><div id="copyright"><img alt="Agora Games" src="/assets/images/agora-logo-agga-7c1d9a1f.png"> <a href="http://majorleaguegaming.com" target="_blank"><img alt="Major League Gaming" src="/assets/images/mlg-logo-28545055.png"></a><a href="mailto:info@agoragames.com" id="email-us">Email Us</a><p>359 Broadway, Third Floor, Troy, NY 12180</p><p class="dim">&copy; 2013 Agora Games. All Rights Reserved.</p></div></div></div></footer><div class="hide"><iframe id="wufoo-iframe" src="javascript:void(0)"></iframe><a id="wufoo-thanks" href="/thanks/"></a></div><!--[if lt IE 9]>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<!--<![endif]-->
<script>
  if (!window.jQuery) {
    document.write('<script type="text/javascript" src="/assets/javascripts/vendor/jquery.min-199fc76d.js"><' + '/script>');
  }
</script>
<script src="/assets/javascripts/all-7e4f2f03.js" type="text/javascript"></script></body></html>